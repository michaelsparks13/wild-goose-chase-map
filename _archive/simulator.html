<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Wild Goose Trail Festival — Race Simulator</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap');

  :root {
    --pink: #E834EC;
    --blue: #0479FF;
    --gold: #D4A017;
    --bg: #07080f;
    --surface: #0e1019;
    --surface2: #151722;
    --border: #1e2030;
    --text: #b0b4c0;
    --text-dim: #555a6e;
    --text-bright: #e8eaf0;
  }
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { font-family: 'Space Grotesk', system-ui, sans-serif; background: var(--bg); color: var(--text); overflow-x: hidden; }

  /* ── LAYOUT ── */
  .app { min-height: 100vh; display: flex; flex-direction: column; }

  /* ── HEADER ── */
  header {
    padding: 24px 32px 16px;
    display: flex;
    align-items: baseline;
    gap: 16px;
    flex-wrap: wrap;
    border-bottom: 1px solid var(--border);
  }
  header h1 { font-size: 1.1em; font-weight: 700; color: var(--text-bright); letter-spacing: 2px; }
  header .pipe { color: var(--text-dim); }
  header .context { font-size: 0.8em; color: var(--text-dim); }

  /* ── RACE TABS ── */
  .tabs {
    display: flex;
    gap: 2px;
    padding: 12px 32px;
    background: var(--surface);
    border-bottom: 1px solid var(--border);
    overflow-x: auto;
  }
  .tab {
    padding: 8px 16px;
    border-radius: 6px;
    border: none;
    background: transparent;
    color: var(--text-dim);
    font-family: inherit;
    font-size: 0.78em;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s;
    white-space: nowrap;
  }
  .tab:hover { color: var(--text); background: var(--surface2); }
  .tab.active { color: var(--text-bright); background: var(--surface2); box-shadow: inset 0 -2px 0 var(--pink); }

  /* ── MAIN STAGE ── */
  .stage { flex: 1; display: grid; grid-template-columns: 1fr 280px; gap: 0; }

  /* Left: the mountain / terrain viz */
  .terrain-panel { position: relative; border-right: 1px solid var(--border); overflow: hidden; }
  #terrainCanvas { width: 100%; height: 100%; display: block; min-height: 420px; }

  /* Runner dot overlay */
  .runner-dot-info {
    position: absolute;
    top: 20px;
    left: 24px;
    pointer-events: none;
  }
  .runner-elevation {
    font-family: 'JetBrains Mono', monospace;
    font-size: 2.4em;
    font-weight: 600;
    color: var(--text-bright);
    line-height: 1;
  }
  .runner-elevation-unit { font-size: 0.35em; color: var(--text-dim); font-weight: 400; vertical-align: baseline; margin-left: 4px; }
  .runner-meta { font-size: 0.75em; color: var(--text-dim); margin-top: 4px; }

  /* Loop indicator pill */
  .current-loop-pill {
    position: absolute;
    top: 20px;
    right: 24px;
    padding: 6px 14px;
    border-radius: 20px;
    font-size: 0.75em;
    font-weight: 600;
    border: 1px solid;
    pointer-events: none;
  }

  /* Right: data panel */
  .data-panel {
    background: var(--surface);
    padding: 20px;
    display: flex;
    flex-direction: column;
    gap: 20px;
    overflow-y: auto;
  }

  /* Clock */
  .clock-block { text-align: center; padding: 12px 0; }
  .clock-time {
    font-family: 'JetBrains Mono', monospace;
    font-size: 2em;
    font-weight: 600;
    color: var(--text-bright);
    letter-spacing: 2px;
  }
  .clock-label { font-size: 0.65em; color: var(--text-dim); text-transform: uppercase; letter-spacing: 1.5px; margin-top: 4px; }

  /* Data rows */
  .data-section-title { font-size: 0.6em; text-transform: uppercase; letter-spacing: 2px; color: var(--text-dim); padding-bottom: 6px; border-bottom: 1px solid var(--border); }
  .data-row { display: flex; justify-content: space-between; align-items: center; padding: 6px 0; }
  .data-key { font-size: 0.75em; color: var(--text-dim); }
  .data-val { font-family: 'JetBrains Mono', monospace; font-size: 0.82em; font-weight: 500; color: var(--text-bright); }

  /* Progress ring */
  .progress-ring-wrap { text-align: center; padding: 8px 0; }
  .progress-ring-wrap svg { width: 120px; height: 120px; }
  .progress-pct {
    font-family: 'JetBrains Mono', monospace;
    font-size: 1.5em;
    font-weight: 600;
    fill: var(--text-bright);
  }
  .progress-label-svg { font-size: 0.5em; fill: var(--text-dim); font-family: 'Space Grotesk', sans-serif; }

  /* Loop tracker */
  .loop-tracker { display: flex; flex-direction: column; gap: 4px; }
  .loop-track-row { display: flex; align-items: center; gap: 8px; padding: 5px 8px; border-radius: 5px; font-size: 0.75em; }
  .loop-track-row.current { background: var(--surface2); }
  .loop-track-dot { width: 8px; height: 8px; border-radius: 2px; flex-shrink: 0; }
  .loop-track-name { flex: 1; }
  .loop-track-status { font-family: 'JetBrains Mono', monospace; font-size: 0.85em; color: var(--text-dim); }
  .loop-track-status.done { color: #4ade80; }
  .loop-track-status.active { color: var(--text-bright); }

  /* ── SCRUBBER ── */
  .scrubber {
    padding: 12px 32px 20px;
    background: var(--surface);
    border-top: 1px solid var(--border);
  }
  .scrubber-row { display: flex; align-items: center; gap: 16px; }
  .play-btn {
    width: 36px; height: 36px; border-radius: 50%;
    background: var(--surface2); border: 1px solid var(--border);
    color: var(--text-bright); cursor: pointer;
    display: flex; align-items: center; justify-content: center;
    font-size: 14px; transition: all 0.2s; flex-shrink: 0;
  }
  .play-btn:hover { background: #222438; border-color: #444; }
  .scrub-track { flex: 1; position: relative; height: 32px; cursor: pointer; }
  .scrub-bg { position: absolute; top: 12px; left: 0; right: 0; height: 8px; background: var(--surface2); border-radius: 4px; overflow: hidden; }
  .scrub-segments { position: absolute; top: 0; left: 0; height: 100%; display: flex; width: 100%; }
  .scrub-seg { height: 100%; }
  .scrub-fill { position: absolute; top: 0; left: 0; height: 100%; background: rgba(255,255,255,0.08); border-radius: 4px 0 0 4px; transition: width 0.05s; }
  .scrub-handle {
    position: absolute; top: 6px; width: 20px; height: 20px;
    background: var(--text-bright); border-radius: 50%;
    transform: translateX(-50%);
    box-shadow: 0 0 10px rgba(232,52,236,0.3);
    transition: left 0.05s;
    pointer-events: none;
  }
  .scrub-hq-marks { position: absolute; top: 0; left: 0; right: 0; height: 32px; pointer-events: none; }
  .hq-tick {
    position: absolute; top: 4px; width: 1px; height: 24px;
    background: rgba(255,215,0,0.3);
  }
  .hq-tick::after {
    content: 'HQ';
    position: absolute;
    top: -12px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 7px;
    color: rgba(255,215,0,0.4);
    font-weight: 600;
  }
  .speed-control { display: flex; align-items: center; gap: 6px; flex-shrink: 0; }
  .speed-btn {
    padding: 4px 8px; border-radius: 4px;
    background: transparent; border: 1px solid var(--border);
    color: var(--text-dim); font-family: 'JetBrains Mono', monospace;
    font-size: 0.65em; cursor: pointer; transition: all 0.2s;
  }
  .speed-btn:hover { border-color: #555; color: var(--text); }
  .speed-btn.active { border-color: var(--pink); color: var(--text-bright); }

  /* ── PACE INPUT ── */
  .pace-bar {
    display: flex;
    align-items: center;
    gap: 14px;
    padding: 10px 32px;
    background: var(--surface);
    border-bottom: 1px solid var(--border);
    flex-wrap: wrap;
  }
  .pace-label { font-size: 0.7em; color: var(--text-dim); text-transform: uppercase; letter-spacing: 1px; white-space: nowrap; }
  .pace-input-group { display: flex; align-items: center; gap: 4px; }
  .pace-input {
    width: 44px;
    padding: 5px 4px;
    border-radius: 5px;
    border: 1px solid var(--border);
    background: var(--surface2);
    color: var(--text-bright);
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.85em;
    text-align: center;
    outline: none;
    transition: border-color 0.2s;
  }
  .pace-input:focus { border-color: var(--pink); }
  .pace-input-label { font-size: 0.7em; color: var(--text-dim); }
  .pace-colon { font-size: 1.1em; color: var(--text-dim); font-weight: 700; }
  .pace-result { font-size: 0.75em; color: var(--text); }
  .pace-result strong { color: var(--text-bright); font-weight: 600; }
  .pace-presets { display: flex; gap: 4px; margin-left: auto; }
  .pace-preset-btn {
    padding: 4px 10px; border-radius: 4px;
    background: transparent; border: 1px solid var(--border);
    color: var(--text-dim); font-family: inherit;
    font-size: 0.65em; cursor: pointer; transition: all 0.2s; white-space: nowrap;
  }
  .pace-preset-btn:hover { border-color: #555; color: var(--text); }

  /* ── RESPONSIVE ── */
  @media (max-width: 900px) {
    .stage { grid-template-columns: 1fr; }
    .data-panel { flex-direction: row; flex-wrap: wrap; border-top: 1px solid var(--border); padding: 16px; }
    .data-panel > * { flex: 1; min-width: 140px; }
    .terrain-panel { min-height: 350px; }
    .scrubber { padding: 12px 16px 16px; }
    header { padding: 16px; }
    .tabs { padding: 8px 16px; }
    .pace-bar { padding: 8px 16px; }
  }
  @media (max-width: 500px) {
    .runner-elevation { font-size: 1.6em; }
    .clock-time { font-size: 1.4em; }
  }
</style>
</head>
<body>
<div class="app">

<header>
  <h1>WILD GOOSE</h1>
  <span class="pipe">|</span>
  <span class="context">Race Day Simulator</span>
</header>

<div class="tabs" id="tabs"></div>

<div class="pace-bar" id="paceBar">
  <div class="pace-input-group">
    <div>
      <input type="number" class="pace-input" id="paceHrs" min="0" max="99" value="10" style="width:38px" oninput="updateFinishTime()">
      <div class="pace-input-label">hrs</div>
    </div>
    <span class="pace-colon">:</span>
    <div>
      <input type="number" class="pace-input" id="paceMins" min="0" max="59" value="0" style="width:38px" oninput="updateFinishTime()">
      <div class="pace-input-label">min</div>
    </div>
  </div>
  <div class="pace-result" id="paceResult">Avg pace: <strong>12:54 /mi</strong></div>
  <div class="pace-presets" id="pacePresets"></div>
</div>

<div class="stage">
  <div class="terrain-panel">
    <canvas id="terrainCanvas"></canvas>
    <div class="runner-dot-info">
      <div class="runner-elevation" id="runnerEle">1,152<span class="runner-elevation-unit">ft</span></div>
      <div class="runner-meta" id="runnerMeta">Mile 0.0 &middot; Climbing</div>
    </div>
    <div class="current-loop-pill" id="loopPill" style="color:var(--pink);border-color:var(--pink)">Pink Loop</div>
  </div>

  <div class="data-panel">
    <div class="clock-block">
      <div class="clock-time" id="clockTime">5:00 AM</div>
      <div class="clock-label">Time of Day</div>
    </div>

    <div class="progress-ring-wrap" id="progressRing"></div>

    <div>
      <div class="data-section-title">Race Data</div>
      <div class="data-row"><span class="data-key">Distance</span><span class="data-val" id="dataDist">0.0 mi</span></div>
      <div class="data-row"><span class="data-key">Elevation</span><span class="data-val" id="dataEle">1,152 ft</span></div>
      <div class="data-row"><span class="data-key">Gain So Far</span><span class="data-val" id="dataGain">0 ft</span></div>
      <div class="data-row"><span class="data-key">Current Grade</span><span class="data-val" id="dataGrade">0%</span></div>
      <div class="data-row"><span class="data-key">Loop</span><span class="data-val" id="dataLoop">1 of 1</span></div>
    </div>

    <div>
      <div class="data-section-title">Loop Sequence</div>
      <div class="loop-tracker" id="loopTracker"></div>
    </div>
  </div>
</div>

<div class="scrubber">
  <div class="scrubber-row">
    <button class="play-btn" id="playBtn" onclick="togglePlay()">&#9654;</button>
    <div class="scrub-track" id="scrubTrack">
      <div class="scrub-bg">
        <div class="scrub-segments" id="scrubSegments"></div>
        <div class="scrub-fill" id="scrubFill"></div>
      </div>
      <div class="scrub-hq-marks" id="scrubHQ"></div>
      <div class="scrub-handle" id="scrubHandle"></div>
    </div>
    <div class="speed-control">
      <button class="speed-btn" data-speed="0.5" onclick="setSpeed(0.5, this)">&half;x</button>
      <button class="speed-btn active" data-speed="1" onclick="setSpeed(1, this)">1x</button>
      <button class="speed-btn" data-speed="3" onclick="setSpeed(3, this)">3x</button>
      <button class="speed-btn" data-speed="8" onclick="setSpeed(8, this)">8x</button>
    </div>
  </div>
</div>

</div>

<script>
// ============================================================
// DATA
// ============================================================
const LOOP = {
  pink:      { color: '#E834EC', label: 'Pink Loop',      abbr: 'P', miles: 7.75, gain: 1400, profile: null },
  blue:      { color: '#0479FF', label: 'Blue Loop',       abbr: 'B', miles: 6.0,  gain: 600,  profile: null },
  checkered: { color: '#D4A017', label: 'Checkered Loop',  abbr: 'C', miles: 4.75, gain: 700,  profile: null },
};

const RACES = [
  { id: '10k',  name: '10K',           miles: 6.0,    loops: ['blue'],    paceMin: 9, hours: 1 },
  { id: 'half', name: 'Half Marathon',  miles: 13.75,  loops: ['blue','pink'], paceMin: 10, hours: 2.5 },
  { id: '30k',  name: '30K',           miles: 18.5,   loops: ['pink','checkered','blue'], paceMin: 11, hours: 3.5 },
  { id: '50k',  name: '50K',           miles: 31.0,   loops: ['pink','checkered','blue','pink','checkered'], paceMin: 12, hours: 6.5 },
  { id: '50m',  name: '50 Miler',      miles: 50.75,  loops: ['checkered','blue','pink','checkered','blue','pink','blue','pink'], paceMin: 14, hours: 12 },
  { id: '100k', name: '100K',          miles: 62.0,   loops: ['pink','checkered','blue','pink','checkered','pink','checkered','blue','pink','checkered'], paceMin: 15, hours: 16 },
  { id: '100m', name: '100 Miler',     miles: 100.25, loops: ['pink','checkered','blue','pink','checkered','blue','pink','checkered','blue','pink','checkered','blue','pink','checkered','blue','pink'], paceMin: 18, hours: 30 },
];

// Load profiles
const pinkData = {"type":"FeatureCollection","features":[{"type":"Feature","properties":{"name":"Pink Loop","loop":"pink","color":"#E834EC","nominal_miles":7.75,"distance_mi":7.76,"gain_ft":876,"loss_ft":869,"min_ele_ft":1050,"max_ele_ft":1306},"geometry":{"type":"LineString","coordinates":[[-74.429188,41.190461,344],[-74.429075,41.190577,344],[-74.429001,41.19071,344],[-74.428975,41.190853,344],[-74.428866,41.190975,344],[-74.428908,41.19111,344],[-74.429012,41.191227,344],[-74.429121,41.191352,344],[-74.429212,41.191471,344],[-74.429289,41.191616,344],[-74.429333,41.191765,345],[-74.42935,41.191914,346],[-74.42935,41.192053,345],[-74.429351,41.192193,345],[-74.429324,41.192334,345],[-74.429256,41.192473,345],[-74.429174,41.192594,345],[-74.429054,41.192712,346],[-74.428918,41.192811,346],[-74.428726,41.192848,346],[-74.428547,41.192838,346],[-74.428372,41.192788,346],[-74.428207,41.192735,346],[-74.428023,41.19267,346],[-74.42785,41.192629,346],[-74.427673,41.1926,346],[-74.427492,41.192535,346],[-74.427313,41.192488,347],[-74.427121,41.192516,347],[-74.426927,41.192518,348],[-74.426733,41.192475,349],[-74.426544,41.192457,349],[-74.42635,41.192477,349],[-74.426153,41.192531,348],[-74.425959,41.192553,348],[-74.425767,41.192544,346],[-74.425579,41.192552,345],[-74.425388,41.192552,345],[-74.425205,41.192505,344],[-74.425023,41.192469,343],[-74.42484,41.192465,341],[-74.424647,41.192454,340],[-74.42444,41.192433,339],[-74.424253,41.192418,339],[-74.42406,41.192392,337],[-74.423856,41.192385,337],[-74.423671,41.192388,337],[-74.423487,41.192399,336],[-74.423304,41.19242,335],[-74.423101,41.192435,334],[-74.422896,41.19247,333],[-74.42271,41.192497,332],[-74.422526,41.192537,332],[-74.422317,41.192569,332],[-74.422114,41.192576,331],[-74.42191,41.192562,330],[-74.421735,41.192532,330],[-74.421561,41.192495,330],[-74.421395,41.192431,329],[-74.421235,41.192365,328],[-74.42107,41.192302,328],[-74.420904,41.192241,328],[-74.420719,41.192187,327],[-74.420521,41.192173,326],[-74.420317,41.192168,326],[-74.420125,41.192177,325],[-74.419935,41.19223,325],[-74.419756,41.192305,324],[-74.419591,41.1924,324],[-74.419449,41.192501,323],[-74.419299,41.192586,323],[-74.419161,41.192691,322],[-74.419025,41.192781,322],[-74.418882,41.192883,321],[-74.418743,41.192993,321],[-74.418579,41.193084,321],[-74.418392,41.193107,320],[-74.418191,41.193122,320],[-74.417988,41.193144,320],[-74.417806,41.19314,320],[-74.417628,41.193115,320],[-74.417441,41.193069,320],[-74.417274,41.193013,320],[-74.417107,41.192936,320],[-74.416947,41.192845,320],[-74.416815,41.192737,320],[-74.416682,41.192631,320],[-74.416521,41.19254,320],[-74.416385,41.192436,321],[-74.416372,41.192288,322],[-74.416359,41.192153,322],[-74.416409,41.192021,322],[-74.416488,41.191893,322],[-74.416534,41.191752,322],[-74.416634,41.19164,322],[-74.416728,41.191518,323],[-74.41684,41.191408,323],[-74.416953,41.191298,323],[-74.417038,41.19116,323],[-74.417133,41.191028,323],[-74.417215,41.190901,323],[-74.41733,41.190783,323],[-74.417438,41.190655,323],[-74.417541,41.190533,323],[-74.417644,41.190418,323],[-74.417734,41.190295,323],[-74.417824,41.190176,323],[-74.417899,41.190051,323],[-74.417992,41.189923,323],[-74.418042,41.189788,322],[-74.4181,41.189656,322],[-74.418137,41.18952,322],[-74.418187,41.18939,322],[-74.418239,41.189256,322],[-74.418343,41.189122,322],[-74.418452,41.188994,322],[-74.418524,41.188857,323],[-74.418615,41.188723,323],[-74.418664,41.188592,323],[-74.41874,41.188464,324],[-74.418801,41.188331,324],[-74.418851,41.1882,325],[-74.41892,41.188074,326],[-74.419028,41.187952,327],[-74.419129,41.187833,327],[-74.419226,41.187706,327],[-74.419312,41.187584,328],[-74.419402,41.187446,328],[-74.419531,41.187334,328],[-74.419634,41.187218,328],[-74.419728,41.187088,328],[-74.419792,41.186958,328],[-74.419858,41.186831,328],[-74.419974,41.186715,328],[-74.420075,41.186583,329],[-74.42017,41.186449,329],[-74.420284,41.18633,329],[-74.42041,41.18621,329],[-74.420536,41.186104,329],[-74.420671,41.185994,329],[-74.42079,41.185892,329],[-74.420922,41.185799,329],[-74.421062,41.185701,329],[-74.421195,41.185606,329],[-74.421344,41.185531,330],[-74.421479,41.185434,331],[-74.421608,41.185336,332],[-74.421702,41.185214,333],[-74.421775,41.185086,334],[-74.421761,41.184949,334],[-74.421589,41.184894,334],[-74.421399,41.184893,334],[-74.421209,41.184926,334],[-74.421082,41.185031,335],[-74.420981,41.185144,335],[-74.420819,41.185225,336],[-74.420658,41.185288,337],[-74.420481,41.185335,338],[-74.420302,41.185374,338],[-74.420117,41.1854,338],[-74.419968,41.18532,338],[-74.419833,41.185224,339],[-74.419764,41.185096,340],[-74.41964,41.18499,340],[-74.419528,41.184883,340],[-74.419461,41.18475,341],[-74.419339,41.184648,341],[-74.419214,41.184545,342],[-74.419048,41.184471,343],[-74.418866,41.184437,344],[-74.418681,41.184415,344],[-74.418493,41.184379,345],[-74.418304,41.184359,346],[-74.418118,41.184337,348],[-74.417941,41.184291,349],[-74.417776,41.184218,350],[-74.417606,41.184154,351],[-74.417428,41.18413,351],[-74.417255,41.184072,351],[-74.41708,41.184031,351],[-74.416967,41.183925,351],[-74.416876,41.183801,351],[-74.416825,41.183654,351],[-74.416759,41.183518,350],[-74.416757,41.183382,350],[-74.416749,41.183246,348],[-74.416697,41.18311,346],[-74.416684,41.182973,345],[-74.416737,41.182836,344],[-74.416761,41.182697,344],[-74.416682,41.18257,343],[-74.416586,41.182456,342],[-74.416465,41.182352,342],[-74.416309,41.182267,342],[-74.416156,41.182193,342],[-74.415984,41.182136,342],[-74.415821,41.182075,343],[-74.415643,41.182057,343],[-74.415448,41.182027,343],[-74.415267,41.182036,344],[-74.415134,41.181934,345],[-74.415071,41.181803,346],[-74.415031,41.18167,347],[-74.414955,41.181546,348],[-74.414878,41.181411,348],[-74.414818,41.181276,349],[-74.414754,41.181137,350],[-74.414692,41.180998,350],[-74.41467,41.18085,351],[-74.414693,41.180707,351],[-74.414709,41.180555,352],[-74.414731,41.180406,352],[-74.414763,41.180268,352],[-74.414771,41.180122,352],[-74.414791,41.179971,351],[-74.414821,41.179835,351],[-74.414845,41.179688,351],[-74.414756,41.179559,351],[-74.414623,41.179465,351],[-74.41451,41.179335,351],[-74.414402,41.17921,351],[-74.414248,41.17911,350],[-74.414092,41.179038,350],[-74.413917,41.178975,350],[-74.413736,41.178919,349],[-74.413555,41.178864,349],[-74.413394,41.178792,348],[-74.413245,41.178717,347],[-74.413111,41.178621,347],[-74.41297,41.178536,346],[-74.412795,41.178476,346],[-74.412633,41.178402,347],[-74.412486,41.178315,347],[-74.412324,41.178239,347],[-74.41218,41.178151,348],[-74.412033,41.178057,349],[-74.411889,41.17797,350],[-74.411794,41.177855,351],[-74.411679,41.177746,351],[-74.411592,41.177628,351],[-74.411562,41.177491,351],[-74.411469,41.177375,354],[-74.411339,41.177278,355],[-74.411193,41.17719,356],[-74.411103,41.177066,356],[-74.411082,41.176923,357],[-74.411022,41.176791,358],[-74.410942,41.176664,358],[-74.410926,41.176519,358],[-74.410937,41.176379,360],[-74.410912,41.176237,360],[-74.410925,41.176093,360],[-74.410992,41.17596,361],[-74.411086,41.175839,361],[-74.411131,41.175701,360],[-74.411181,41.175558,360],[-74.411258,41.175429,359],[-74.411297,41.175296,360],[-74.411378,41.175165,360],[-74.41142,41.175025,360],[-74.411444,41.174874,360],[-74.411479,41.174737,359],[-74.411515,41.1746,359],[-74.411539,41.174456,360],[-74.41157,41.174312,359],[-74.411539,41.174172,359],[-74.411496,41.174041,358],[-74.411426,41.173903,357],[-74.411448,41.173759,356],[-74.411441,41.173623,355],[-74.41142,41.173486,353],[-74.411435,41.173339,351],[-74.411484,41.173207,349],[-74.411378,41.173097,348],[-74.411239,41.173004,348],[-74.411072,41.172945,348],[-74.410894,41.172904,348],[-74.410719,41.172874,348],[-74.410534,41.172847,348],[-74.410362,41.172808,348],[-74.410194,41.172755,348],[-74.410016,41.172717,348],[-74.409827,41.172692,348],[-74.409647,41.17267,348],[-74.409476,41.172628,348],[-74.409299,41.172581,348],[-74.409122,41.172555,348],[-74.408945,41.172492,348],[-74.408818,41.172394,348],[-74.408729,41.172276,349],[-74.408709,41.17213,351],[-74.408691,41.171994,351],[-74.408629,41.171859,352],[-74.408612,41.171706,353],[-74.408603,41.171571,353],[-74.408565,41.171437,353],[-74.408506,41.171306,352],[-74.408529,41.17117,352],[-74.408685,41.171098,353],[-74.408855,41.171049,353],[-74.409026,41.170996,353],[-74.409194,41.170929,351],[-74.409316,41.17082,350],[-74.409486,41.170776,350],[-74.409634,41.170699,350],[-74.409758,41.170586,350],[-74.409843,41.170464,351],[-74.410023,41.170419,352],[-74.410188,41.170361,352],[-74.410379,41.170348,352],[-74.410518,41.170252,353],[-74.410605,41.170134,353],[-74.410536,41.170009,355],[-74.410425,41.169898,359],[-74.410433,41.169763,360],[-74.410377,41.169631,361],[-74.410218,41.169563,362],[-74.410063,41.169481,363],[-74.410031,41.169348,364],[-74.410085,41.169214,366],[-74.410122,41.169081,367],[-74.410044,41.168959,368],[-74.409948,41.168837,369],[-74.409896,41.168703,369],[-74.409882,41.168565,369],[-74.409846,41.168428,369],[-74.409873,41.168287,368],[-74.409886,41.168145,368],[-74.409904,41.168007,368],[-74.409997,41.167877,368],[-74.410179,41.167873,368],[-74.410329,41.167797,368],[-74.410484,41.167714,367],[-74.41049,41.167577,366],[-74.410338,41.167491,365],[-74.410251,41.167358,365],[-74.410233,41.167218,365],[-74.410164,41.167089,365],[-74.410017,41.167,364],[-74.4099,41.166893,361],[-74.409809,41.166774,359],[-74.409765,41.166643,359],[-74.409734,41.166507,357],[-74.40972,41.166365,355],[-74.409685,41.166231,354],[-74.40975,41.166092,353],[-74.409869,41.16599,353],[-74.40996,41.165869,353],[-74.410057,41.165755,353],[-74.410235,41.165702,355],[-74.410415,41.165683,356],[-74.410492,41.165556,357],[-74.410568,41.16543,359],[-74.410569,41.165291,360],[-74.410464,41.16518,363],[-74.410428,41.165045,365],[-74.410469,41.164906,366],[-74.410464,41.164766,367],[-74.410506,41.164633,368],[-74.410572,41.1645,369],[-74.410612,41.164366,369],[-74.410587,41.164227,369],[-74.410554,41.164084,367],[-74.410609,41.163952,366],[-74.410621,41.163817,365],[-74.410717,41.163694,363],[-74.410753,41.163555,361],[-74.410768,41.163411,359],[-74.410845,41.163286,358],[-74.41088,41.163144,359],[-74.410921,41.162998,359],[-74.410941,41.162854,358],[-74.410908,41.162719,358],[-74.410899,41.162577,354],[-74.410702,41.162552,353],[-74.410524,41.16253,353],[-74.410348,41.162496,353],[-74.410149,41.162475,353],[-74.409991,41.16239,352],[-74.409949,41.162257,352],[-74.409942,41.162113,351],[-74.409964,41.16197,351],[-74.409964,41.161827,351],[-74.409976,41.161684,352],[-74.409986,41.161548,352],[-74.409977,41.161406,353],[-74.409997,41.161258,353],[-74.410063,41.161119,353],[-74.410105,41.160981,352],[-74.410148,41.160844,352],[-74.410207,41.160706,351],[-74.410275,41.160565,350],[-74.410374,41.160452,349],[-74.410422,41.160321,347],[-74.410527,41.160201,347],[-74.41066,41.160085,348],[-74.410755,41.159959,349],[-74.410859,41.159848,350],[-74.41099,41.159738,350],[-74.411123,41.15964,350],[-74.41125,41.159532,349],[-74.411331,41.159408,349],[-74.411388,41.159274,348],[-74.411392,41.159131,348],[-74.411399,41.15899,349],[-74.411411,41.158851,349],[-74.411409,41.158715,350],[-74.411494,41.158596,351],[-74.411657,41.158518,351],[-74.411819,41.158447,352],[-74.412007,41.158398,353],[-74.41219,41.158392,355],[-74.412366,41.158346,356],[-74.412505,41.158244,357],[-74.412586,41.158111,358],[-74.412675,41.157989,359],[-74.412817,41.157905,361],[-74.41295,41.157814,362],[-74.41309,41.157725,363],[-74.41324,41.157629,365],[-74.413384,41.157541,366],[-74.41354,41.157472,367],[-74.413689,41.157395,368],[-74.413841,41.157308,368],[-74.413964,41.157202,369],[-74.414132,41.157144,371],[-74.414313,41.157153,371],[-74.414478,41.157211,374],[-74.41456,41.157335,375],[-74.41466,41.15745,377],[-74.414765,41.157563,377],[-74.414871,41.157676,378],[-74.414998,41.15779,378],[-74.415153,41.157879,379],[-74.415299,41.157974,379],[-74.415421,41.158074,379],[-74.41554,41.158184,379],[-74.415639,41.158299,379],[-74.41574,41.158425,378],[-74.415841,41.158553,377],[-74.415972,41.15867,375],[-74.416099,41.15877,375],[-74.416234,41.158875,373],[-74.41634,41.158984,373],[-74.416399,41.159113,373],[-74.416464,41.159253,372],[-74.416511,41.159398,373],[-74.416557,41.159533,373],[-74.416678,41.159637,373],[-74.416843,41.159704,373],[-74.417007,41.159768,374],[-74.417142,41.15986,375],[-74.417258,41.159963,376],[-74.417424,41.160024,378],[-74.417594,41.160083,379],[-74.41775,41.160175,379],[-74.417902,41.160264,379],[-74.41804,41.160352,379],[-74.418219,41.160366,377],[-74.418398,41.160416,376],[-74.418576,41.160466,375],[-74.418763,41.160499,373],[-74.418926,41.160564,371],[-74.419067,41.160669,369],[-74.419181,41.160788,368],[-74.419277,41.160908,366],[-74.419316,41.161058,365],[-74.419365,41.161201,364],[-74.419483,41.161307,362],[-74.419645,41.161373,360],[-74.419838,41.161386,359],[-74.420003,41.161325,358],[-74.420171,41.161247,357],[-74.420293,41.161136,356],[-74.42042,41.161035,356],[-74.420527,41.160917,357],[-74.420674,41.160814,357],[-74.420787,41.160709,357],[-74.420897,41.160597,357],[-74.421038,41.160513,357],[-74.421211,41.160457,358],[-74.421387,41.160423,358],[-74.421568,41.160455,360],[-74.421735,41.160505,360],[-74.421904,41.160561,361],[-74.422072,41.160623,362],[-74.422199,41.16073,363],[-74.422306,41.160843,363],[-74.422425,41.160945,364],[-74.422541,41.161058,364],[-74.422611,41.161197,364],[-74.422745,41.161308,364],[-74.422901,41.161387,361],[-74.42304,41.161479,360],[-74.423174,41.16158,360],[-74.423321,41.161662,360],[-74.423465,41.161744,361],[-74.423608,41.161826,362],[-74.423737,41.161929,363],[-74.423912,41.161982,365],[-74.424103,41.161991,367],[-74.424294,41.162012,368],[-74.424473,41.161991,369],[-74.424654,41.16196,369],[-74.424839,41.161948,370],[-74.425024,41.161974,370],[-74.425201,41.161952,368],[-74.425381,41.161962,367],[-74.425566,41.161982,365],[-74.425733,41.162041,365],[-74.425928,41.162041,363],[-74.426117,41.162064,363],[-74.426309,41.162095,362],[-74.426498,41.162124,362],[-74.426696,41.162149,362],[-74.426886,41.162187,362],[-74.427077,41.162184,363],[-74.427257,41.162199,363],[-74.427433,41.16223,363],[-74.427613,41.162263,365],[-74.427787,41.162301,366],[-74.427929,41.162387,368],[-74.427967,41.162526,368],[-74.428006,41.162658,369],[-74.428002,41.162796,369],[-74.42803,41.162931,367],[-74.428075,41.163077,365],[-74.428071,41.163212,363],[-74.428083,41.16336,362],[-74.428083,41.163497,360],[-74.428114,41.163643,360],[-74.428185,41.163785,359],[-74.42824,41.163926,359],[-74.428331,41.164048,358],[-74.428425,41.164189,357],[-74.428531,41.164303,356],[-74.42868,41.1644,355],[-74.428837,41.164495,355],[-74.428995,41.164565,354],[-74.429178,41.164607,354],[-74.429365,41.164597,355],[-74.429484,41.164481,355],[-74.42962,41.164385,355],[-74.429823,41.16437,355],[-74.42998,41.164448,356],[-74.430118,41.164538,356],[-74.430249,41.164633,357],[-74.430356,41.164746,359],[-74.430472,41.164855,360],[-74.430596,41.164953,361],[-74.430712,41.165058,364],[-74.430807,41.165178,366],[-74.430945,41.165269,368],[-74.431077,41.165363,369],[-74.431201,41.165463,370],[-74.431322,41.165566,371],[-74.431406,41.165689,373],[-74.431494,41.165813,374],[-74.431657,41.16587,376],[-74.431832,41.165907,377],[-74.432019,41.165849,380],[-74.432211,41.165824,381],[-74.432315,41.165936,382],[-74.432299,41.16608,380],[-74.432241,41.166209,379],[-74.43218,41.166349,377],[-74.432107,41.166481,375],[-74.432034,41.166624,374],[-74.431957,41.166764,373],[-74.431944,41.16692,370],[-74.431964,41.167073,370],[-74.431975,41.167218,368],[-74.431966,41.16736,367],[-74.43197,41.167497,366],[-74.431904,41.167627,366],[-74.431812,41.167768,365],[-74.431702,41.167902,365],[-74.431574,41.167997,365],[-74.431455,41.168112,364],[-74.431317,41.168221,364],[-74.431188,41.168337,363],[-74.43105,41.168433,363],[-74.430892,41.168522,364],[-74.430729,41.16859,364],[-74.430569,41.168661,364],[-74.430428,41.168766,364],[-74.430343,41.168886,365],[-74.430298,41.169028,365],[-74.430277,41.169175,365],[-74.430208,41.169317,366],[-74.430139,41.169466,367],[-74.430059,41.169597,367],[-74.429991,41.169727,368],[-74.429959,41.169862,368],[-74.429942,41.17,369],[-74.429863,41.170129,369],[-74.429799,41.170256,369],[-74.429767,41.170405,370],[-74.42981,41.17054,370],[-74.429803,41.170689,370],[-74.429761,41.170827,371],[-74.429773,41.170974,372],[-74.429772,41.171112,374],[-74.429722,41.17125,375],[-74.429708,41.171391,376],[-74.429665,41.171529,378],[-74.429629,41.171671,380],[-74.429592,41.171819,381],[-74.429554,41.171957,382],[-74.429519,41.172092,383],[-74.429457,41.17222,384],[-74.429326,41.172319,386],[-74.429172,41.172416,386],[-74.428999,41.172479,386],[-74.428832,41.172541,386],[-74.42866,41.172581,386],[-74.428498,41.172654,386],[-74.428352,41.172754,387],[-74.428227,41.172855,387],[-74.428102,41.172963,387],[-74.427957,41.173045,387],[-74.427816,41.17315,388],[-74.427675,41.173245,389],[-74.427525,41.173344,389],[-74.427429,41.17347,389],[-74.42734,41.173596,389],[-74.427259,41.173719,389],[-74.427162,41.173835,390],[-74.42706,41.173946,391],[-74.426991,41.174077,392],[-74.42689,41.174193,392],[-74.426819,41.174321,393],[-74.426716,41.174445,393],[-74.426603,41.174551,394],[-74.426503,41.174668,395],[-74.426455,41.174801,397],[-74.426434,41.174949,398],[-74.4264,41.175089,398],[-74.426342,41.17523,397],[-74.426257,41.175351,397],[-74.426171,41.175474,396],[-74.426092,41.17561,395],[-74.425994,41.175741,394],[-74.425901,41.175859,393],[-74.425851,41.175989,391],[-74.425785,41.176126,389],[-74.425714,41.176266,387],[-74.425602,41.176384,386],[-74.425493,41.176496,384],[-74.425444,41.17663,382],[-74.425413,41.176772,380],[-74.425361,41.176903,378],[-74.425271,41.177035,376],[-74.425178,41.177155,375],[-74.425092,41.177293,373],[-74.425001,41.17742,372],[-74.424905,41.177546,371],[-74.424828,41.177675,370],[-74.424675,41.177765,369],[-74.424508,41.177819,368],[-74.424345,41.177904,366],[-74.424204,41.178011,365],[-74.424067,41.178122,365],[-74.42395,41.178239,364],[-74.423884,41.178369,363],[-74.423831,41.178501,362],[-74.423828,41.17865,361],[-74.42383,41.17879,360],[-74.423815,41.178927,359],[-74.423826,41.17908,357],[-74.423848,41.179219,355],[-74.423866,41.179362,354],[-74.423939,41.179507,352],[-74.423983,41.179647,351],[-74.423959,41.179789,350],[-74.423949,41.179932,349],[-74.42392,41.180078,349],[-74.423877,41.180209,349],[-74.423798,41.180338,348],[-74.42371,41.180458,348],[-74.423618,41.180575,348],[-74.423568,41.180711,349],[-74.423454,41.180825,350],[-74.423337,41.180935,350],[-74.423197,41.181029,350],[-74.423111,41.181155,351],[-74.423019,41.181275,352],[-74.422904,41.181379,352],[-74.422771,41.181491,352],[-74.422707,41.181627,351],[-74.422637,41.18177,351],[-74.42255,41.181908,350],[-74.422465,41.182027,350],[-74.42237,41.182149,349],[-74.422274,41.182288,347],[-74.422237,41.182435,346],[-74.42217,41.182564,345],[-74.422084,41.182694,345],[-74.422007,41.182816,343],[-74.421988,41.182967,342],[-74.421934,41.183099,341],[-74.421911,41.183241,339],[-74.421926,41.183384,338],[-74.421956,41.183531,337],[-74.42195,41.183667,337],[-74.421947,41.183806,336],[-74.421981,41.183942,336],[-74.422006,41.18408,336],[-74.422041,41.184221,336],[-74.422065,41.184361,336],[-74.422063,41.184501,336],[-74.422049,41.184639,336],[-74.42202,41.184775,336],[-74.421977,41.184915,336],[-74.422027,41.185046,336],[-74.422014,41.185189,336],[-74.422039,41.185326,336],[-74.422056,41.185462,336],[-74.422051,41.185597,337],[-74.422064,41.185736,338],[-74.42216,41.185851,338],[-74.422213,41.185984,340],[-74.42223,41.186127,340],[-74.422187,41.186259,341],[-74.422216,41.186403,341],[-74.42223,41.186541,342],[-74.422285,41.18667,343],[-74.422364,41.186794,344],[-74.422432,41.186932,344],[-74.422559,41.187035,345],[-74.422719,41.187124,345],[-74.422805,41.187245,345],[-74.422895,41.187365,345],[-74.423019,41.187471,345],[-74.423144,41.187578,345],[-74.423272,41.187683,345],[-74.423414,41.18778,346],[-74.423496,41.187911,347],[-74.423551,41.188045,348],[-74.42367,41.188152,348],[-74.423854,41.188126,349],[-74.424021,41.188072,349],[-74.424194,41.188023,349],[-74.424384,41.188022,348],[-74.42456,41.187984,347],[-74.424722,41.187923,347],[-74.424907,41.187909,347],[-74.425076,41.187983,346],[-74.425265,41.188028,346],[-74.425441,41.188063,345],[-74.425612,41.188108,345],[-74.425798,41.188125,345],[-74.425972,41.188165,345],[-74.42615,41.188218,344],[-74.426343,41.188234,345],[-74.426531,41.188247,345],[-74.426726,41.188246,345],[-74.426917,41.188234,345],[-74.427108,41.18822,345],[-74.427287,41.188199,346],[-74.427438,41.188285,348],[-74.427574,41.188388,349],[-74.427683,41.188501,350],[-74.427794,41.18862,350],[-74.427916,41.188731,350],[-74.428042,41.188836,351],[-74.428163,41.188951,350],[-74.428279,41.18907,349],[-74.428391,41.189185,348],[-74.428497,41.189305,347],[-74.428582,41.189426,347],[-74.42864,41.18956,346],[-74.428608,41.189699,346],[-74.428505,41.18982,346],[-74.42861,41.18994,346],[-74.428758,41.19003,346],[-74.428896,41.19012,346],[-74.429025,41.190219,346],[-74.429163,41.190313,346],[-74.429228,41.190378,346]]}}],"profile":[{"d":0,"e":1128.6},{"d":0.033,"e":1128.6},{"d":0.092,"e":1128.6},{"d":0.157,"e":1131.9},{"d":0.224,"e":1135.2},{"d":0.286,"e":1138.5},{"d":0.351,"e":1138.5},{"d":0.42,"e":1112.2},{"d":0.486,"e":1099.1},{"d":0.555,"e":1082.7},{"d":0.621,"e":1072.8},{"d":0.684,"e":1063},{"d":0.746,"e":1053.1},{"d":0.809,"e":1049.9},{"d":0.878,"e":1049.9},{"d":0.941,"e":1056.4},{"d":0.998,"e":1059.7},{"d":1.056,"e":1059.7},{"d":1.1,"e":1056.4},{"d":1.136,"e":1056.4},{"d":1.189,"e":1063},{"d":1.221,"e":1069.6},{"d":1.264,"e":1076.1},{"d":1.318,"e":1076.1},{"d":1.374,"e":1079.4},{"d":1.419,"e":1079.4},{"d":1.453,"e":1086},{"d":1.485,"e":1095.8},{"d":1.523,"e":1095.8},{"d":1.56,"e":1105.6},{"d":1.595,"e":1108.9},{"d":1.625,"e":1115.5},{"d":1.658,"e":1118.8},{"d":1.687,"e":1125.3},{"d":1.719,"e":1135.2},{"d":1.752,"e":1151.6},{"d":1.786,"e":1151.6},{"d":1.808,"e":1151.6},{"d":1.862,"e":1131.9},{"d":1.914,"e":1122},{"d":1.945,"e":1122},{"d":1.975,"e":1125.3},{"d":2.02,"e":1138.5},{"d":2.068,"e":1151.6},{"d":2.122,"e":1154.9},{"d":2.175,"e":1151.6},{"d":2.231,"e":1148.3},{"d":2.276,"e":1138.5},{"d":2.296,"e":1135.2},{"d":2.338,"e":1141.7},{"d":2.364,"e":1151.6},{"d":2.393,"e":1151.6},{"d":2.42,"e":1164.7},{"d":2.45,"e":1171.3},{"d":2.483,"e":1181.1},{"d":2.52,"e":1184.4},{"d":2.556,"e":1177.8},{"d":2.602,"e":1177.8},{"d":2.648,"e":1177.8},{"d":2.694,"e":1158.1},{"d":2.727,"e":1141.7},{"d":2.751,"e":1141.7},{"d":2.777,"e":1141.7},{"d":2.804,"e":1141.7},{"d":2.828,"e":1141.7},{"d":2.853,"e":1141.7},{"d":2.888,"e":1151.6},{"d":2.927,"e":1158.1},{"d":2.961,"e":1158.1},{"d":2.998,"e":1148.3},{"d":3.015,"e":1148.3},{"d":3.045,"e":1151.6},{"d":3.076,"e":1154.9},{"d":3.104,"e":1161.4},{"d":3.127,"e":1181.1},{"d":3.153,"e":1187.7},{"d":3.181,"e":1200.8},{"d":3.214,"e":1210.6},{"d":3.243,"e":1207.3},{"d":3.272,"e":1207.3},{"d":3.303,"e":1207.3},{"d":3.329,"e":1200.8},{"d":3.358,"e":1197.5},{"d":3.384,"e":1190.9},{"d":3.394,"e":1181.1},{"d":3.407,"e":1177.8},{"d":3.426,"e":1168},{"d":3.454,"e":1158.1},{"d":3.472,"e":1158.1},{"d":3.5,"e":1168},{"d":3.527,"e":1181.1},{"d":3.552,"e":1197.5},{"d":3.579,"e":1207.3},{"d":3.607,"e":1210.6},{"d":3.648,"e":1194.2},{"d":3.676,"e":1174.5},{"d":3.709,"e":1177.8},{"d":3.751,"e":1158.1},{"d":3.794,"e":1154.9},{"d":3.824,"e":1151.6},{"d":3.856,"e":1158.1},{"d":3.895,"e":1154.9},{"d":3.932,"e":1138.5},{"d":3.966,"e":1145},{"d":4.012,"e":1145},{"d":4.046,"e":1145},{"d":4.086,"e":1151.6},{"d":4.117,"e":1164.7},{"d":4.151,"e":1177.8},{"d":4.18,"e":1190.9},{"d":4.216,"e":1204.1},{"d":4.257,"e":1217.2},{"d":4.285,"e":1233.6},{"d":4.328,"e":1240.2},{"d":4.373,"e":1243.4},{"d":4.422,"e":1223.8},{"d":4.469,"e":1223.8},{"d":4.5,"e":1227},{"d":4.528,"e":1240.2},{"d":4.567,"e":1243.4},{"d":4.617,"e":1217.2},{"d":4.663,"e":1197.5},{"d":4.707,"e":1174.5},{"d":4.745,"e":1168},{"d":4.791,"e":1174.5},{"d":4.821,"e":1181.1},{"d":4.851,"e":1187.7},{"d":4.88,"e":1194.2},{"d":4.922,"e":1184.4},{"d":4.952,"e":1184.4},{"d":4.977,"e":1194.2},{"d":5.008,"e":1207.3},{"d":5.051,"e":1207.3},{"d":5.103,"e":1190.9},{"d":5.146,"e":1187.7},{"d":5.174,"e":1194.2},{"d":5.198,"e":1204.1},{"d":5.229,"e":1210.6},{"d":5.274,"e":1184.4},{"d":5.32,"e":1174.5},{"d":5.373,"e":1161.4},{"d":5.411,"e":1164.7},{"d":5.449,"e":1171.3},{"d":5.469,"e":1181.1},{"d":5.496,"e":1197.5},{"d":5.523,"e":1210.6},{"d":5.551,"e":1223.8},{"d":5.579,"e":1236.9},{"d":5.61,"e":1253.3},{"d":5.661,"e":1227},{"d":5.715,"e":1204.1},{"d":5.775,"e":1194.2},{"d":5.832,"e":1194.2},{"d":5.876,"e":1200.8},{"d":5.926,"e":1207.3},{"d":5.978,"e":1213.9},{"d":6.015,"e":1227},{"d":6.043,"e":1240.2},{"d":6.075,"e":1253.3},{"d":6.107,"e":1266.4},{"d":6.154,"e":1266.4},{"d":6.199,"e":1273},{"d":6.239,"e":1276.2},{"d":6.269,"e":1282.8},{"d":6.302,"e":1289.4},{"d":6.335,"e":1299.2},{"d":6.381,"e":1299.2},{"d":6.428,"e":1282.8},{"d":6.471,"e":1256.6},{"d":6.514,"e":1230.3},{"d":6.567,"e":1213.9},{"d":6.619,"e":1194.2},{"d":6.664,"e":1177.8},{"d":6.714,"e":1151.6},{"d":6.767,"e":1141.7},{"d":6.802,"e":1145},{"d":6.84,"e":1151.6},{"d":6.892,"e":1148.3},{"d":6.947,"e":1131.9},{"d":6.987,"e":1118.8},{"d":7.02,"e":1105.6},{"d":7.057,"e":1102.4},{"d":7.088,"e":1102.4},{"d":7.115,"e":1102.4},{"d":7.146,"e":1102.4},{"d":7.177,"e":1108.9},{"d":7.206,"e":1118.8},{"d":7.238,"e":1122},{"d":7.271,"e":1131.9},{"d":7.307,"e":1131.9},{"d":7.342,"e":1138.5},{"d":7.373,"e":1141.7},{"d":7.402,"e":1141.7},{"d":7.44,"e":1138.5},{"d":7.475,"e":1131.9},{"d":7.507,"e":1128.6},{"d":7.541,"e":1131.9},{"d":7.572,"e":1141.7},{"d":7.606,"e":1148.3},{"d":7.643,"e":1148.3},{"d":7.68,"e":1138.5},{"d":7.716,"e":1135.2},{"d":7.756,"e":1135.2},{"d":7.761,"e":1135.2}]};
const blueData = {"type":"FeatureCollection","features":[{"type":"Feature","properties":{"name":"Blue Loop","loop":"blue","color":"#0479FF","nominal_miles":6,"distance_mi":6.26,"gain_ft":732,"loss_ft":731,"min_ele_ft":1122,"max_ele_ft":1318},"geometry":{"type":"LineString","coordinates":[[-74.429151,41.190438,351.35546875],[-74.429253,41.190523,351.0859375],[-74.429383,41.190633,350.73046875],[-74.429417,41.190698,350.4765625],[-74.429344,41.190753,350.296875],[-74.429261,41.190781,350.19140625],[-74.429099,41.190836,350.2421875],[-74.429025,41.190857,350.5390625],[-74.428914,41.190889,351.109375],[-74.428797,41.190953,351.921875],[-74.428932,41.191132,351.65234375],[-74.429168,41.191542,351.01171875],[-74.429266,41.191927,351.72265625],[-74.429217,41.192337,356.26953125],[-74.429062,41.192631,358.16796875],[-74.428895,41.192849,358.859375],[-74.42887,41.192881,359.03515625],[-74.428944,41.1929,359.6875],[-74.429749,41.192916,368.2734375],[-74.430339,41.192851,371.37109375],[-74.431122,41.192601,369.09765625],[-74.431464,41.192387,368.4609375],[-74.431755,41.192205,368.3046875],[-74.431907,41.192116,368.828125],[-74.431809,41.192054,368.21484375],[-74.431692,41.192016,367.4140625],[-74.431578,41.191954,367.01171875],[-74.431515,41.191876,367.23046875],[-74.431574,41.191851,367.33984375],[-74.431686,41.191722,367.83984375],[-74.431826,41.191581,368.62109375],[-74.432003,41.191488,369.6171875],[-74.432232,41.19148,371.03515625],[-74.432244,41.19148,371.0859375],[-74.432513,41.191504,372.125],[-74.432647,41.191468,371.3359375],[-74.432845,41.191319,371.79296875],[-74.433242,41.191145,374.390625],[-74.433521,41.191032,375.203125],[-74.433714,41.190879,376.13671875],[-74.433929,41.190749,376.64453125],[-74.434111,41.190725,375.81640625],[-74.434358,41.190741,374.875],[-74.434556,41.190733,374.171875],[-74.434755,41.190616,373.4921875],[-74.435077,41.190326,372.7578125],[-74.435307,41.190116,374.31640625],[-74.435479,41.18995,376.86328125],[-74.435661,41.189874,378.88671875],[-74.435978,41.189833,381.34375],[-74.436128,41.189789,381.96484375],[-74.436311,41.18968,381.0859375],[-74.436429,41.189587,380.5234375],[-74.436552,41.189466,380.08984375],[-74.436611,41.189349,379.65625],[-74.436611,41.18926,379.3359375],[-74.436675,41.189135,378.55078125],[-74.436842,41.188961,376.22265625],[-74.437003,41.188828,374.58203125],[-74.437469,41.188517,376.546875],[-74.437727,41.188323,375.70703125],[-74.437941,41.188105,374.859375],[-74.437986,41.188029,374.51171875],[-74.438124,41.187798,373.37109375],[-74.438247,41.187653,371.26171875],[-74.43836,41.187488,369.04296875],[-74.438589,41.187483,370.4921875],[-74.438728,41.187526,371.859375],[-74.438861,41.187625,373.62109375],[-74.439071,41.187725,376.61328125],[-74.439177,41.187815,378.703125],[-74.439333,41.187819,379.78125],[-74.43951,41.187711,379.0625],[-74.43967,41.187561,377.5546875],[-74.439828,41.187403,378.49609375],[-74.439894,41.187286,378.5],[-74.439935,41.187215,378.671875],[-74.440006,41.186763,372.1328125],[-74.440087,41.186423,367.41796875],[-74.440014,41.186126,363.34375],[-74.440117,41.185935,363.84375],[-74.440316,41.185707,364.44140625],[-74.44055,41.185387,362.9375],[-74.44073,41.185197,362.49609375],[-74.440995,41.185025,363.359375],[-74.441226,41.1849,365.109375],[-74.441305,41.184742,364.3671875],[-74.441308,41.1846,362.63671875],[-74.441271,41.184508,361.3125],[-74.441147,41.184401,359.7734375],[-74.440632,41.184215,359.5],[-74.440095,41.184533,358.63671875],[-74.439901,41.184682,359.0546875],[-74.43959,41.184563,360.05859375],[-74.439541,41.184115,361.98828125],[-74.439922,41.183765,363.140625],[-74.440213,41.18332,364.58203125],[-74.440348,41.183028,365.59375],[-74.440644,41.18268,365.84765625],[-74.440548,41.182437,367.265625],[-74.440102,41.18219,370.203125],[-74.439713,41.182278,372.28515625],[-74.439335,41.181976,372.58203125],[-74.439179,41.181852,372.26953125],[-74.439046,41.181259,371.92578125],[-74.438256,41.180704,367.734375],[-74.438958,41.180198,369.484375],[-74.4391,41.180053,368.921875],[-74.439213,41.179857,367.98828125],[-74.439272,41.179684,366.84765625],[-74.439352,41.17954,366.34375],[-74.439395,41.179391,366.1640625],[-74.439433,41.179237,366.6953125],[-74.439435,41.17908,366.98828125],[-74.439492,41.178949,367],[-74.439604,41.178803,367],[-74.439746,41.1787,366.9296875],[-74.439934,41.17861,366.2421875],[-74.440152,41.178565,365.3203125],[-74.440471,41.178515,365.69140625],[-74.440699,41.178444,366.3203125],[-74.440916,41.178325,367.31640625],[-74.441273,41.178143,369.5625],[-74.441654,41.178004,370.38671875],[-74.4419,41.177846,371.9140625],[-74.442131,41.177671,371.9765625],[-74.442329,41.177552,373.94140625],[-74.442447,41.177356,375.9609375],[-74.44252,41.177174,376.8984375],[-74.442555,41.177081,376.7265625],[-74.442753,41.176754,374.12890625],[-74.442922,41.176544,373.22265625],[-74.44304,41.176377,372.77734375],[-74.44311,41.176161,373.81640625],[-74.443185,41.176023,374.6171875],[-74.443306,41.175894,375.203125],[-74.443459,41.175789,375.984375],[-74.443601,41.175632,375.7109375],[-74.443711,41.175458,375.7109375],[-74.443826,41.175264,376.55859375],[-74.443931,41.175036,377.3359375],[-74.444043,41.174683,375.8515625],[-74.444116,41.174402,374.96484375],[-74.444161,41.174208,375.796875],[-74.444237,41.173988,375.79296875],[-74.444336,41.173827,375.953125],[-74.444349,41.173712,375.45703125],[-74.444336,41.17354,374.7109375],[-74.444293,41.173457,374.08984375],[-74.44425,41.173354,373.6171875],[-74.444234,41.173243,373.1171875],[-74.444237,41.173149,372.8671875],[-74.444212,41.173029,372.296875],[-74.444186,41.172935,372.1328125],[-74.444204,41.172795,372.12890625],[-74.444253,41.17265,372.296875],[-74.444338,41.172402,372.62109375],[-74.444392,41.172305,372.80078125],[-74.444483,41.172074,372.63671875],[-74.444625,41.171901,372.34765625],[-74.444687,41.171759,371.5546875],[-74.444867,41.17155,370.9140625],[-74.445033,41.171382,371.15234375],[-74.445118,41.171311,371.41796875],[-74.445154,41.171281,371.50390625],[-74.445293,41.171069,371.5],[-74.445374,41.170952,370.53515625],[-74.445406,41.170792,369.26953125],[-74.445393,41.170683,368.65625],[-74.445301,41.170544,367.23828125],[-74.44528,41.170411,367.0234375],[-74.445264,41.170298,366.93359375],[-74.445253,41.170152,366.484375],[-74.445266,41.170019,366.06640625],[-74.445245,41.169954,365.63671875],[-74.44521,41.169928,365.4921875],[-74.445228,41.16997,365.78125],[-74.445456,41.169786,366.453125],[-74.44563,41.16956,368.8125],[-74.445699,41.169402,370.359375],[-74.445734,41.169276,371.4375],[-74.445781,41.169162,372.63671875],[-74.445786,41.169018,373.21484375],[-74.445757,41.168922,373.359375],[-74.445694,41.168787,372.78125],[-74.445705,41.168656,372.74609375],[-74.44574,41.168573,372.890625],[-74.445665,41.168443,371.98046875],[-74.44556,41.168299,371.5078125],[-74.445497,41.168216,372.18359375],[-74.445462,41.168146,372.61328125],[-74.445439,41.168063,373.2890625],[-74.445433,41.167971,373.38671875],[-74.44545,41.167888,373.9921875],[-74.445427,41.167762,373.80078125],[-74.445462,41.1676,374.171875],[-74.445497,41.167452,374.47265625],[-74.445502,41.167347,373.82421875],[-74.445479,41.167251,372.8125],[-74.445537,41.167151,373.45703125],[-74.445578,41.167029,373.71875],[-74.445618,41.166946,374.171875],[-74.445705,41.166859,375.13671875],[-74.445705,41.166754,374.30078125],[-74.445636,41.166662,372.86328125],[-74.445572,41.166571,371.45703125],[-74.445566,41.16651,371.02734375],[-74.445595,41.166422,370.703125],[-74.445659,41.166335,371.046875],[-74.445676,41.166243,371.1015625],[-74.445584,41.166134,370.1796875],[-74.445572,41.166091,370.09375],[-74.445572,41.165955,370.04296875],[-74.445572,41.16582,370.04296875],[-74.445595,41.165702,370.40234375],[-74.445624,41.16558,370.69921875],[-74.445665,41.165449,370.96484375],[-74.445688,41.165358,371.21875],[-74.445643,41.165328,371.5078125],[-74.445725,41.16526,371.47265625],[-74.445797,41.1652,371.64453125],[-74.445896,41.165119,371.7890625],[-74.445962,41.165063,372.01171875],[-74.446054,41.164987,372.35546875],[-74.446103,41.164947,372.75],[-74.446053,41.164913,373.44140625],[-74.446041,41.164812,374.81640625],[-74.446041,41.164699,376.15625],[-74.446059,41.164629,376.66015625],[-74.446117,41.16455,377.2265625],[-74.446163,41.164476,377.71875],[-74.446296,41.164419,377.9375],[-74.446366,41.164354,377.6796875],[-74.446436,41.164302,377.20703125],[-74.446459,41.164223,376.88671875],[-74.446436,41.164123,376.64453125],[-74.446389,41.16404,376.5390625],[-74.446354,41.163966,376.33203125],[-74.446343,41.163826,375.9609375],[-74.44625,41.1637,375.65625],[-74.446181,41.163595,375.28515625],[-74.44614,41.163525,375.39453125],[-74.44614,41.16342,375.7890625],[-74.446134,41.163333,376.0546875],[-74.446105,41.16322,375.5859375],[-74.446065,41.163145,375.19140625],[-74.446076,41.163054,374.8671875],[-74.446088,41.162936,374.5078125],[-74.446111,41.162788,374.0390625],[-74.446186,41.1627,373.72265625],[-74.446239,41.162626,373.3984375],[-74.446227,41.162561,372.859375],[-74.446204,41.162465,372.21875],[-74.446215,41.162356,372.03125],[-74.44625,41.162251,372.046875],[-74.446308,41.162159,372.71875],[-74.446508,41.16203,374.125],[-74.446459,41.161987,374.08984375],[-74.44632,41.162076,373.140625],[-74.446302,41.162006,373.3671875],[-74.446244,41.161937,373.55078125],[-74.446136,41.161844,375.3203125],[-74.446076,41.161786,376.28515625],[-74.446118,41.16175,377.20703125],[-74.446089,41.161731,377.61328125],[-74.44607,41.161691,378.48046875],[-74.446035,41.161616,379.7890625],[-74.445974,41.161632,379.58984375],[-74.4459,41.161587,380.16796875],[-74.445819,41.161423,382.50390625],[-74.445763,41.16136,382.8125],[-74.445849,41.161301,383.359375],[-74.445786,41.16125,383.265625],[-74.445703,41.161307,382.6640625],[-74.44563,41.161225,382.41796875],[-74.445698,41.161178,382.91015625],[-74.445623,41.161116,382.453125],[-74.445432,41.160908,382.72265625],[-74.445399,41.160852,382.9375],[-74.445125,41.16098,382.72265625],[-74.444692,41.160997,382.12890625],[-74.444241,41.161018,380.81640625],[-74.443826,41.161002,382.91796875],[-74.443371,41.161197,385.5078125],[-74.443137,41.161406,384.453125],[-74.442979,41.161615,383.95703125],[-74.442739,41.161693,385.93359375],[-74.442426,41.161795,386.82421875],[-74.442362,41.161882,386.70703125],[-74.442341,41.161911,386.65625],[-74.440536,41.162459,395.20703125],[-74.440281,41.162536,395.98828125],[-74.439243,41.162648,392.98046875],[-74.438872,41.162754,392.296875],[-74.438458,41.162616,392.84765625],[-74.437869,41.162768,388.38671875],[-74.437391,41.162992,386.66796875],[-74.435996,41.163902,391.015625],[-74.435414,41.164167,394.046875],[-74.434946,41.164336,396.359375],[-74.434587,41.164795,396.734375],[-74.434338,41.165041,396.890625],[-74.433994,41.165274,399.91796875],[-74.43368,41.165582,401.6171875],[-74.433182,41.165767,400.24609375],[-74.432382,41.165875,395.8515625],[-74.431438,41.167598,376.5703125],[-74.430767,41.168033,374.86328125],[-74.430684,41.168286,376.21875],[-74.430273,41.169535,382.62890625],[-74.429607,41.171558,391.21484375],[-74.427928,41.172527,395.91796875],[-74.427726,41.172845,399.515625],[-74.424922,41.177242,381.6015625],[-74.42419,41.177501,375.25],[-74.423854,41.177806,375.10546875],[-74.423641,41.178196,377.5703125],[-74.423697,41.17867,378.46484375],[-74.423854,41.180004,363.55859375],[-74.423041,41.180669,370.30859375],[-74.422485,41.181253,368.6796875],[-74.422267,41.181629,364.29296875],[-74.421917,41.1823,363.51953125],[-74.421871,41.182987,355.76953125],[-74.421708,41.184026,342.13671875],[-74.421993,41.184201,342.6484375],[-74.422024,41.184646,345.63671875],[-74.421904,41.184982,347.921875],[-74.421909,41.185023,348.4765625],[-74.422112,41.186573,358.33984375],[-74.422238,41.186816,359.875],[-74.422681,41.187243,356.8828125],[-74.422846,41.187404,357.78515625],[-74.423063,41.187583,356.265625],[-74.423358,41.187805,354.359375],[-74.423484,41.188027,356.140625],[-74.42355,41.188187,359.02734375],[-74.4237,41.18818,358.03125],[-74.424262,41.188041,354],[-74.424702,41.187942,354],[-74.424859,41.187941,354],[-74.424953,41.187951,354],[-74.424987,41.187955,354],[-74.425218,41.18806,354],[-74.425413,41.18808,354],[-74.425535,41.188088,354],[-74.425663,41.188098,354],[-74.425979,41.188188,354],[-74.426466,41.18826,354],[-74.426601,41.188262,354],[-74.427377,41.18822,354],[-74.428055,41.188927,354.43359375],[-74.428377,41.18927,354.98828125],[-74.428538,41.189425,355.4296875],[-74.428654,41.189548,354.6171875],[-74.428662,41.189544,354.65234375],[-74.428526,41.189794,353.55859375],[-74.428493,41.189854,353.0546875],[-74.428748,41.190044,351.7109375],[-74.429003,41.190233,351.671875],[-74.42922,41.190394,351.48046875]]}}],"profile":[{"d":0,"e":1152.7},{"d":0.008,"e":1151.9},{"d":0.018,"e":1150.7},{"d":0.023,"e":1149.9},{"d":0.028,"e":1149.3},{"d":0.033,"e":1148.9},{"d":0.042,"e":1149.1},{"d":0.046,"e":1150.1},{"d":0.053,"e":1151.9},{"d":0.06,"e":1154.6},{"d":0.074,"e":1153.7},{"d":0.105,"e":1151.6},{"d":0.132,"e":1153.9},{"d":0.161,"e":1168.9},{"d":0.183,"e":1175.1},{"d":0.2,"e":1177.4},{"d":0.202,"e":1177.9},{"d":0.207,"e":1180.1},{"d":0.248,"e":1208.2},{"d":0.279,"e":1218.4},{"d":0.324,"e":1211},{"d":0.347,"e":1208.9},{"d":0.366,"e":1208.3},{"d":0.376,"e":1210.1},{"d":0.383,"e":1208.1},{"d":0.39,"e":1205.4},{"d":0.397,"e":1204.1},{"d":0.403,"e":1204.8},{"d":0.407,"e":1205.2},{"d":0.418,"e":1206.8},{"d":0.43,"e":1209.4},{"d":0.441,"e":1212.7},{"d":0.453,"e":1217.3},{"d":0.453,"e":1217.5},{"d":0.468,"e":1220.9},{"d":0.475,"e":1218.3},{"d":0.489,"e":1219.8},{"d":0.513,"e":1228.3},{"d":0.53,"e":1231},{"d":0.544,"e":1234},{"d":0.559,"e":1235.7},{"d":0.568,"e":1233},{"d":0.581,"e":1229.9},{"d":0.592,"e":1227.6},{"d":0.605,"e":1225.4},{"d":0.631,"e":1223},{"d":0.65,"e":1228.1},{"d":0.664,"e":1236.4},{"d":0.675,"e":1243.1},{"d":0.692,"e":1251.1},{"d":0.7,"e":1253.2},{"d":0.712,"e":1250.3},{"d":0.721,"e":1248.4},{"d":0.732,"e":1247},{"d":0.74,"e":1245.6},{"d":0.746,"e":1244.5},{"d":0.756,"e":1242},{"d":0.771,"e":1234.3},{"d":0.783,"e":1228.9},{"d":0.815,"e":1235.4},{"d":0.834,"e":1232.6},{"d":0.853,"e":1229.9},{"d":0.859,"e":1228.7},{"d":0.876,"e":1225},{"d":0.888,"e":1218.1},{"d":0.901,"e":1210.8},{"d":0.913,"e":1215.5},{"d":0.921,"e":1220},{"d":0.93,"e":1225.8},{"d":0.943,"e":1235.6},{"d":0.952,"e":1242.5},{"d":0.96,"e":1246},{"d":0.972,"e":1243.6},{"d":0.985,"e":1238.7},{"d":0.999,"e":1241.8},{"d":1.007,"e":1241.8},{"d":1.013,"e":1242.4},{"d":1.044,"e":1220.9},{"d":1.068,"e":1205.4},{"d":1.089,"e":1192.1},{"d":1.103,"e":1193.7},{"d":1.122,"e":1195.7},{"d":1.147,"e":1190.7},{"d":1.163,"e":1189.3},{"d":1.182,"e":1192.1},{"d":1.196,"e":1197.9},{"d":1.208,"e":1195.4},{"d":1.218,"e":1189.8},{"d":1.224,"e":1185.4},{"d":1.234,"e":1180.4},{"d":1.264,"e":1179.5},{"d":1.3,"e":1176.6},{"d":1.314,"e":1178},{"d":1.332,"e":1181.3},{"d":1.363,"e":1187.6},{"d":1.394,"e":1191.4},{"d":1.429,"e":1196.1},{"d":1.45,"e":1199.5},{"d":1.479,"e":1200.3},{"d":1.496,"e":1204.9},{"d":1.525,"e":1214.6},{"d":1.546,"e":1221.4},{"d":1.575,"e":1222.4},{"d":1.586,"e":1221.4},{"d":1.628,"e":1220.2},{"d":1.684,"e":1206.5},{"d":1.735,"e":1212.2},{"d":1.747,"e":1210.4},{"d":1.762,"e":1207.3},{"d":1.774,"e":1203.6},{"d":1.785,"e":1201.9},{"d":1.796,"e":1201.3},{"d":1.806,"e":1203.1},{"d":1.817,"e":1204},{"d":1.827,"e":1204.1},{"d":1.838,"e":1204.1},{"d":1.849,"e":1203.8},{"d":1.86,"e":1201.6},{"d":1.872,"e":1198.6},{"d":1.889,"e":1199.8},{"d":1.902,"e":1201.8},{"d":1.916,"e":1205.1},{"d":1.938,"e":1212.5},{"d":1.96,"e":1215.2},{"d":1.977,"e":1220.2},{"d":1.994,"e":1220.4},{"d":2.007,"e":1226.8},{"d":2.022,"e":1233.5},{"d":2.035,"e":1236.5},{"d":2.042,"e":1236},{"d":2.067,"e":1227.5},{"d":2.084,"e":1224.5},{"d":2.097,"e":1223},{"d":2.112,"e":1226.4},{"d":2.122,"e":1229.1},{"d":2.133,"e":1231},{"d":2.144,"e":1233.5},{"d":2.157,"e":1232.6},{"d":2.171,"e":1232.6},{"d":2.185,"e":1235.4},{"d":2.202,"e":1238},{"d":2.227,"e":1233.1},{"d":2.247,"e":1230.2},{"d":2.26,"e":1232.9},{"d":2.276,"e":1232.9},{"d":2.288,"e":1233.4},{"d":2.296,"e":1231.8},{"d":2.308,"e":1229.4},{"d":2.314,"e":1227.3},{"d":2.322,"e":1225.8},{"d":2.33,"e":1224.1},{"d":2.336,"e":1223.3},{"d":2.344,"e":1221.4},{"d":2.351,"e":1220.9},{"d":2.361,"e":1220.9},{"d":2.371,"e":1221.4},{"d":2.389,"e":1222.5},{"d":2.396,"e":1223.1},{"d":2.413,"e":1222.6},{"d":2.427,"e":1221.6},{"d":2.437,"e":1219},{"d":2.454,"e":1216.9},{"d":2.469,"e":1217.7},{"d":2.475,"e":1218.6},{"d":2.478,"e":1218.8},{"d":2.495,"e":1218.8},{"d":2.504,"e":1215.7},{"d":2.515,"e":1211.5},{"d":2.522,"e":1209.5},{"d":2.533,"e":1204.9},{"d":2.542,"e":1204.1},{"d":2.55,"e":1203.9},{"d":2.56,"e":1202.4},{"d":2.57,"e":1201},{"d":2.574,"e":1199.6},{"d":2.577,"e":1199.1},{"d":2.58,"e":1200.1},{"d":2.597,"e":1202.3},{"d":2.615,"e":1210},{"d":2.627,"e":1215.1},{"d":2.636,"e":1218.6},{"d":2.644,"e":1222.6},{"d":2.654,"e":1224.5},{"d":2.661,"e":1224.9},{"d":2.671,"e":1223},{"d":2.68,"e":1222.9},{"d":2.686,"e":1223.4},{"d":2.695,"e":1220.4},{"d":2.707,"e":1218.9},{"d":2.713,"e":1221.1},{"d":2.719,"e":1222.5},{"d":2.724,"e":1224.7},{"d":2.731,"e":1225},{"d":2.737,"e":1227},{"d":2.745,"e":1226.4},{"d":2.757,"e":1227.6},{"d":2.767,"e":1228.6},{"d":2.774,"e":1226.5},{"d":2.781,"e":1223.1},{"d":2.789,"e":1225.3},{"d":2.797,"e":1226.1},{"d":2.803,"e":1227.6},{"d":2.811,"e":1230.8},{"d":2.818,"e":1228},{"d":2.825,"e":1223.3},{"d":2.833,"e":1218.7},{"d":2.837,"e":1217.3},{"d":2.843,"e":1216.2},{"d":2.85,"e":1217.3},{"d":2.856,"e":1217.5},{"d":2.865,"e":1214.5},{"d":2.868,"e":1214.2},{"d":2.878,"e":1214.1},{"d":2.887,"e":1214.1},{"d":2.895,"e":1215.2},{"d":2.904,"e":1216.2},{"d":2.913,"e":1217.1},{"d":2.92,"e":1217.9},{"d":2.923,"e":1218.9},{"d":2.929,"e":1218.7},{"d":2.935,"e":1219.3},{"d":2.942,"e":1219.8},{"d":2.947,"e":1220.5},{"d":2.954,"e":1221.6},{"d":2.958,"e":1222.9},{"d":2.962,"e":1225.2},{"d":2.969,"e":1229.7},{"d":2.977,"e":1234.1},{"d":2.981,"e":1235.8},{"d":2.988,"e":1237.6},{"d":2.993,"e":1239.2},{"d":3.001,"e":1240},{"d":3.007,"e":1239.1},{"d":3.012,"e":1237.6},{"d":3.018,"e":1236.5},{"d":3.025,"e":1235.7},{"d":3.031,"e":1235.4},{"d":3.036,"e":1234.7},{"d":3.046,"e":1233.5},{"d":3.056,"e":1232.5},{"d":3.064,"e":1231.3},{"d":3.07,"e":1231.6},{"d":3.077,"e":1232.9},{"d":3.083,"e":1233.8},{"d":3.091,"e":1232.2},{"d":3.096,"e":1230.9},{"d":3.103,"e":1229.9},{"d":3.111,"e":1228.7},{"d":3.121,"e":1227.2},{"d":3.128,"e":1226.1},{"d":3.134,"e":1225.1},{"d":3.139,"e":1223.3},{"d":3.145,"e":1221.2},{"d":3.153,"e":1220.6},{"d":3.16,"e":1220.6},{"d":3.167,"e":1222.8},{"d":3.181,"e":1227.4},{"d":3.185,"e":1227.3},{"d":3.195,"e":1224.2},{"d":3.2,"e":1225},{"d":3.205,"e":1225.6},{"d":3.214,"e":1231.4},{"d":3.219,"e":1234.5},{"d":3.222,"e":1237.6},{"d":3.224,"e":1238.9},{"d":3.227,"e":1241.7},{"d":3.233,"e":1246},{"d":3.236,"e":1245.4},{"d":3.241,"e":1247.3},{"d":3.253,"e":1254.9},{"d":3.258,"e":1255.9},{"d":3.264,"e":1257.7},{"d":3.269,"e":1257.4},{"d":3.275,"e":1255.5},{"d":3.282,"e":1254.7},{"d":3.286,"e":1256.3},{"d":3.292,"e":1254.8},{"d":3.31,"e":1255.7},{"d":3.314,"e":1256.4},{"d":3.331,"e":1255.7},{"d":3.353,"e":1253.7},{"d":3.377,"e":1249.4},{"d":3.398,"e":1256.3},{"d":3.426,"e":1264.8},{"d":3.445,"e":1261.3},{"d":3.461,"e":1259.7},{"d":3.475,"e":1266.2},{"d":3.493,"e":1269.1},{"d":3.499,"e":1268.7},{"d":3.502,"e":1268.6},{"d":3.603,"e":1296.6},{"d":3.617,"e":1299.2},{"d":3.672,"e":1289.3},{"d":3.692,"e":1287.1},{"d":3.716,"e":1288.9},{"d":3.748,"e":1274.2},{"d":3.778,"e":1268.6},{"d":3.874,"e":1282.9},{"d":3.909,"e":1292.8},{"d":3.936,"e":1300.4},{"d":3.973,"e":1301.6},{"d":3.994,"e":1302.1},{"d":4.018,"e":1312.1},{"d":4.045,"e":1317.6},{"d":4.074,"e":1313.1},{"d":4.116,"e":1298.7},{"d":4.245,"e":1235.5},{"d":4.291,"e":1229.9},{"d":4.309,"e":1234.3},{"d":4.398,"e":1255.3},{"d":4.542,"e":1283.5},{"d":4.652,"e":1298.9},{"d":4.676,"e":1310.7},{"d":5.013,"e":1252},{"d":5.055,"e":1231.1},{"d":5.083,"e":1230.7},{"d":5.112,"e":1238.7},{"d":5.145,"e":1241.7},{"d":5.237,"e":1192.8},{"d":5.3,"e":1214.9},{"d":5.349,"e":1209.6},{"d":5.378,"e":1195.2},{"d":5.428,"e":1192.6},{"d":5.475,"e":1167.2},{"d":5.547,"e":1122.5},{"d":5.567,"e":1124.2},{"d":5.597,"e":1134},{"d":5.621,"e":1141.5},{"d":5.624,"e":1143.3},{"d":5.732,"e":1175.7},{"d":5.75,"e":1180.7},{"d":5.787,"e":1170.9},{"d":5.801,"e":1173.8},{"d":5.818,"e":1168.9},{"d":5.84,"e":1162.6},{"d":5.856,"e":1168.4},{"d":5.868,"e":1177.9},{"d":5.876,"e":1174.6},{"d":5.907,"e":1161.4},{"d":5.93,"e":1161.4},{"d":5.939,"e":1161.4},{"d":5.944,"e":1161.4},{"d":5.945,"e":1161.4},{"d":5.959,"e":1161.4},{"d":5.97,"e":1161.4},{"d":5.976,"e":1161.4},{"d":5.983,"e":1161.4},{"d":6,"e":1161.4},{"d":6.026,"e":1161.4},{"d":6.033,"e":1161.4},{"d":6.073,"e":1161.4},{"d":6.134,"e":1162.8},{"d":6.163,"e":1164.7},{"d":6.176,"e":1166.1},{"d":6.187,"e":1163.4},{"d":6.187,"e":1163.6},{"d":6.206,"e":1160},{"d":6.21,"e":1158.3},{"d":6.229,"e":1153.9},{"d":6.248,"e":1153.8},{"d":6.264,"e":1153.2}]};
const checkeredData = {"type":"FeatureCollection","features":[{"type":"Feature","properties":{"name":"Checkered Loop","loop":"checkered","color":"#D4A017","nominal_miles":4.75,"distance_mi":4.74,"gain_ft":482,"loss_ft":502,"min_ele_ft":1060,"max_ele_ft":1276},"geometry":{"type":"LineString","coordinates":[[-74.429246,41.190425,353],[-74.429278,41.190566,353],[-74.429237,41.190706,353],[-74.429157,41.190836,353],[-74.429009,41.190926,353],[-74.428946,41.191064,353],[-74.429006,41.191219,353],[-74.429081,41.191344,353],[-74.429175,41.191487,353],[-74.42924,41.191625,353],[-74.429281,41.191763,353],[-74.42931,41.191909,353],[-74.429323,41.192055,353],[-74.429309,41.192206,354],[-74.429272,41.192362,354],[-74.429219,41.192506,354],[-74.429145,41.192642,354],[-74.429044,41.192782,355],[-74.428872,41.192858,355],[-74.428659,41.19286,355],[-74.428455,41.192819,355],[-74.428272,41.192763,355],[-74.428091,41.192715,355],[-74.427903,41.192662,355],[-74.427722,41.192607,355],[-74.42754,41.192563,355],[-74.427362,41.19254,356],[-74.427157,41.192521,356],[-74.426972,41.192512,357],[-74.426789,41.192506,357],[-74.426595,41.192507,357],[-74.426402,41.192511,357],[-74.426203,41.192501,357],[-74.426001,41.192516,356],[-74.425793,41.192525,355],[-74.425593,41.192516,355],[-74.425392,41.192482,354],[-74.425181,41.192459,353],[-74.424976,41.192435,351],[-74.424795,41.192418,350],[-74.424616,41.192388,349],[-74.424435,41.192364,348],[-74.424256,41.192343,348],[-74.424049,41.192333,347],[-74.423845,41.192334,346],[-74.423643,41.192346,346],[-74.423446,41.192367,345],[-74.423244,41.192399,344],[-74.423045,41.19243,344],[-74.42285,41.19246,343],[-74.422658,41.192505,342],[-74.422456,41.192537,342],[-74.42225,41.192545,341],[-74.422045,41.192538,340],[-74.421845,41.192517,340],[-74.421648,41.192477,339],[-74.421469,41.192416,339],[-74.421283,41.192348,338],[-74.4211,41.192267,337],[-74.420917,41.192196,337],[-74.420733,41.192145,336],[-74.420549,41.192134,336],[-74.420351,41.192147,335],[-74.420157,41.192189,334],[-74.419964,41.192228,334],[-74.41979,41.192302,333],[-74.419608,41.192378,333],[-74.419469,41.192474,332],[-74.419344,41.192582,332],[-74.419205,41.192701,332],[-74.419072,41.192828,331],[-74.418936,41.19294,331],[-74.418808,41.193064,330],[-74.418646,41.19315,330],[-74.418465,41.193199,329],[-74.418273,41.193203,329],[-74.418072,41.193174,329],[-74.417869,41.193163,329],[-74.417672,41.193142,329],[-74.417471,41.1931,329],[-74.417285,41.19303,329],[-74.417117,41.192943,329],[-74.416961,41.192842,329],[-74.416814,41.19274,329],[-74.416672,41.192644,329],[-74.416517,41.19254,330],[-74.416396,41.192433,330],[-74.416249,41.192351,331],[-74.416066,41.192301,331],[-74.415865,41.192254,331],[-74.415691,41.192297,332],[-74.415589,41.192417,332],[-74.415458,41.192517,333],[-74.415317,41.192618,334],[-74.415196,41.19273,334],[-74.415077,41.192841,335],[-74.414945,41.192933,336],[-74.414795,41.193009,336],[-74.414644,41.193088,337],[-74.414476,41.193174,338],[-74.414307,41.193234,339],[-74.414141,41.193313,339],[-74.413996,41.193404,339],[-74.41383,41.193487,339],[-74.413646,41.193535,339],[-74.413517,41.193639,340],[-74.413367,41.193738,340],[-74.413207,41.193818,340],[-74.413063,41.193899,340],[-74.412922,41.193994,340],[-74.41277,41.194085,340],[-74.412624,41.194165,340],[-74.412458,41.194242,340],[-74.412295,41.194327,341],[-74.412138,41.1944,341],[-74.411988,41.19448,341],[-74.411839,41.194582,342],[-74.411697,41.194676,342],[-74.411523,41.194755,343],[-74.411352,41.194811,343],[-74.411196,41.194886,344],[-74.411026,41.194953,344],[-74.410874,41.19504,344],[-74.41072,41.19511,344],[-74.410572,41.195207,345],[-74.410382,41.195262,345],[-74.410221,41.195341,345],[-74.410074,41.195429,346],[-74.40992,41.195503,346],[-74.409765,41.195582,346],[-74.409587,41.195663,346],[-74.409408,41.195737,346],[-74.409265,41.195835,346],[-74.40912,41.195934,346],[-74.408963,41.196022,346],[-74.408804,41.196119,346],[-74.408662,41.196209,346],[-74.40852,41.196292,346],[-74.408394,41.196389,347],[-74.408256,41.19648,347],[-74.40813,41.19659,347],[-74.407993,41.196695,347],[-74.407839,41.196769,347],[-74.407705,41.196874,348],[-74.407559,41.196955,348],[-74.407376,41.197013,348],[-74.407182,41.197051,348],[-74.407002,41.197094,348],[-74.406821,41.197141,348],[-74.40665,41.197185,347],[-74.406456,41.19721,347],[-74.406281,41.197273,347],[-74.406134,41.197376,347],[-74.406026,41.197485,346],[-74.405901,41.197589,345],[-74.405768,41.197684,344],[-74.40562,41.197783,342],[-74.405472,41.197877,342],[-74.405348,41.197978,341],[-74.405204,41.198089,341],[-74.405037,41.198182,340],[-74.404869,41.198266,340],[-74.404704,41.198323,339],[-74.404503,41.19835,339],[-74.404323,41.198386,339],[-74.404185,41.198478,338],[-74.40405,41.198571,338],[-74.403915,41.198682,338],[-74.403785,41.198787,338],[-74.403693,41.198909,338],[-74.403593,41.199026,338],[-74.403538,41.199159,338],[-74.403487,41.199296,338],[-74.403404,41.199423,338],[-74.403383,41.199566,338],[-74.403297,41.199686,338],[-74.403217,41.19982,338],[-74.403149,41.19995,338],[-74.403096,41.200079,338],[-74.403051,41.200212,338],[-74.402983,41.200344,339],[-74.402928,41.200491,339],[-74.402852,41.200634,339],[-74.402767,41.200777,339],[-74.402697,41.200902,340],[-74.40262,41.201041,341],[-74.40254,41.201177,341],[-74.402482,41.201321,342],[-74.402419,41.201451,342],[-74.402339,41.201575,342],[-74.402239,41.201689,342],[-74.402154,41.201814,342],[-74.402057,41.201931,342],[-74.401962,41.202056,342],[-74.401834,41.202169,342],[-74.401722,41.20229,342],[-74.401611,41.202407,343],[-74.401492,41.202537,343],[-74.401378,41.202646,343],[-74.401274,41.202757,343],[-74.401142,41.202873,344],[-74.401047,41.202988,346],[-74.401235,41.20302,348],[-74.401418,41.203002,350],[-74.401582,41.202927,352],[-74.401717,41.202828,352],[-74.401892,41.202784,352],[-74.402092,41.202791,353],[-74.402267,41.202744,354],[-74.402395,41.202639,355],[-74.40258,41.202581,356],[-74.40276,41.202526,357],[-74.402953,41.202516,358],[-74.403149,41.202508,360],[-74.40333,41.202459,361],[-74.403504,41.202416,363],[-74.403685,41.202399,365],[-74.403866,41.202399,366],[-74.404048,41.202445,367],[-74.404188,41.202544,368],[-74.404349,41.202614,368],[-74.404435,41.202734,369],[-74.40461,41.202783,369],[-74.404738,41.202903,368],[-74.404826,41.203025,367],[-74.404967,41.203132,366],[-74.405144,41.203157,364],[-74.405228,41.203281,362],[-74.405301,41.203408,361],[-74.405389,41.203528,360],[-74.405498,41.203644,359],[-74.405607,41.203753,357],[-74.405763,41.203838,356],[-74.405936,41.203882,355],[-74.406121,41.203884,354],[-74.406299,41.203945,354],[-74.406454,41.204032,354],[-74.406628,41.204112,353],[-74.406761,41.204216,353],[-74.406931,41.204264,353],[-74.407128,41.204275,353],[-74.407303,41.204317,352],[-74.407501,41.204338,352],[-74.407699,41.204381,351],[-74.407873,41.204457,350],[-74.407998,41.204563,350],[-74.40815,41.204654,350],[-74.408316,41.204721,350],[-74.408519,41.204744,350],[-74.408643,41.20486,350],[-74.408744,41.204973,351],[-74.408794,41.204825,350],[-74.408812,41.204671,348],[-74.40885,41.204527,346],[-74.408904,41.204381,344],[-74.408996,41.204256,343],[-74.409113,41.204143,340],[-74.409275,41.204057,338],[-74.409447,41.203971,336],[-74.409609,41.203905,335],[-74.409783,41.203848,333],[-74.409952,41.203778,331],[-74.410101,41.203689,329],[-74.410283,41.203641,329],[-74.410467,41.203601,328],[-74.41065,41.203594,327],[-74.410834,41.203594,326],[-74.411025,41.20362,324],[-74.411211,41.203676,324],[-74.411369,41.203742,324],[-74.411537,41.203801,323],[-74.411696,41.203727,323],[-74.411749,41.203596,323],[-74.411847,41.203479,323],[-74.411997,41.203405,324],[-74.412175,41.203339,325],[-74.412339,41.203263,325],[-74.412512,41.20319,325],[-74.412668,41.203123,325],[-74.412802,41.203025,325],[-74.412956,41.202938,325],[-74.413123,41.202868,325],[-74.413281,41.202804,325],[-74.41349,41.202778,325],[-74.413686,41.202765,325],[-74.413878,41.202763,325],[-74.414078,41.202776,326],[-74.414278,41.202805,326],[-74.414473,41.202786,326],[-74.414655,41.202784,327],[-74.414821,41.20273,328],[-74.415011,41.202681,329],[-74.415194,41.202706,330],[-74.415355,41.202772,331],[-74.415543,41.202754,332],[-74.41563,41.202634,334],[-74.415688,41.202498,335],[-74.415737,41.202365,337],[-74.415814,41.202227,338],[-74.415871,41.202086,339],[-74.415936,41.201945,340],[-74.416016,41.201814,342],[-74.416153,41.201721,343],[-74.416285,41.201611,344],[-74.416384,41.201492,346],[-74.416482,41.201375,346],[-74.4166,41.201263,347],[-74.416706,41.201149,347],[-74.416816,41.201033,348],[-74.416955,41.200926,348],[-74.417103,41.20084,349],[-74.417253,41.200755,350],[-74.417384,41.200657,351],[-74.417511,41.20056,352],[-74.417646,41.200453,352],[-74.417764,41.200347,353],[-74.417866,41.200224,353],[-74.417991,41.200115,354],[-74.418096,41.200003,355],[-74.418202,41.19989,356],[-74.418286,41.199757,356],[-74.418416,41.199662,357],[-74.418548,41.19956,357],[-74.418696,41.199481,358],[-74.418844,41.199399,359],[-74.419006,41.199328,359],[-74.419137,41.199227,359],[-74.419287,41.199135,359],[-74.419439,41.199056,359],[-74.41962,41.198992,359],[-74.419793,41.198921,359],[-74.419981,41.198874,359],[-74.420169,41.198834,359],[-74.420351,41.198825,359],[-74.420548,41.198824,358],[-74.420745,41.198832,357],[-74.420941,41.198862,356],[-74.421128,41.198835,356],[-74.421312,41.198796,355],[-74.421379,41.198664,353],[-74.421367,41.198523,351],[-74.421297,41.19839,348],[-74.421275,41.198236,346],[-74.421312,41.198093,344],[-74.421429,41.19799,343],[-74.421549,41.197881,341],[-74.421648,41.197745,340],[-74.421758,41.197636,340],[-74.421838,41.197513,340],[-74.422002,41.197445,340],[-74.422158,41.197377,341],[-74.422341,41.197348,343],[-74.422528,41.19738,344],[-74.422669,41.197472,345],[-74.422754,41.197595,347],[-74.422827,41.19773,348],[-74.422995,41.197792,349],[-74.423128,41.197886,350],[-74.423316,41.197894,351],[-74.423501,41.197932,353],[-74.423665,41.197999,354],[-74.423841,41.198046,355],[-74.424028,41.198075,355],[-74.424203,41.198109,356],[-74.424385,41.198143,357],[-74.424566,41.198186,357],[-74.42474,41.198229,357],[-74.424928,41.198235,357],[-74.42511,41.198244,357],[-74.425236,41.198343,357],[-74.425434,41.198367,357],[-74.425608,41.198432,356],[-74.425784,41.198464,356],[-74.425978,41.198497,356],[-74.426158,41.198492,356],[-74.426347,41.198516,355],[-74.426526,41.198546,354],[-74.426717,41.198543,353],[-74.426891,41.198486,353],[-74.42704,41.198405,353],[-74.427209,41.198339,353],[-74.427345,41.198248,354],[-74.427477,41.198152,354],[-74.42759,41.19803,354],[-74.427696,41.197911,354],[-74.42783,41.197818,354],[-74.428021,41.197748,355],[-74.428183,41.197679,355],[-74.428334,41.197595,355],[-74.428461,41.197496,355],[-74.42851,41.197359,356],[-74.428553,41.197221,358],[-74.42855,41.197078,359],[-74.42858,41.196937,360],[-74.428616,41.196796,360],[-74.428678,41.196659,360],[-74.428748,41.196527,361],[-74.428801,41.196394,361],[-74.428808,41.196246,362],[-74.428848,41.196107,363],[-74.428896,41.195971,364],[-74.428924,41.19583,365],[-74.428988,41.195696,366],[-74.429064,41.195571,366],[-74.429166,41.195456,367],[-74.42925,41.195333,367],[-74.429336,41.195209,368],[-74.429359,41.19507,369],[-74.429383,41.194932,370],[-74.429401,41.194783,371],[-74.429468,41.194656,372],[-74.429527,41.194528,374],[-74.429609,41.194403,374],[-74.429736,41.194303,375],[-74.429848,41.19419,375],[-74.429914,41.194057,374],[-74.430079,41.193963,374],[-74.430255,41.193912,375],[-74.430429,41.193879,376],[-74.430616,41.193896,378],[-74.430804,41.193894,382],[-74.430982,41.193877,385],[-74.431161,41.193842,387],[-74.431344,41.19386,388],[-74.431532,41.193819,389],[-74.431709,41.193781,389],[-74.431896,41.193772,389],[-74.432095,41.193773,388],[-74.432265,41.193725,386],[-74.432452,41.193683,384],[-74.432612,41.193596,381],[-74.432772,41.193498,378],[-74.432912,41.19339,377],[-74.433032,41.193279,375],[-74.433067,41.193137,374],[-74.433142,41.193009,374],[-74.433119,41.192868,374],[-74.433049,41.192738,374],[-74.433038,41.192594,372],[-74.432863,41.192537,368],[-74.432673,41.192592,367],[-74.432463,41.192578,367],[-74.432291,41.192495,366],[-74.432124,41.192393,365],[-74.431997,41.192284,364],[-74.431853,41.1922,360],[-74.431691,41.192132,360],[-74.43153,41.192056,360],[-74.431432,41.19194,360],[-74.431272,41.191839,360],[-74.43112,41.191766,360],[-74.430945,41.191696,359],[-74.430773,41.191615,359],[-74.430616,41.191527,358],[-74.430507,41.191409,358],[-74.430417,41.191292,357],[-74.430352,41.191166,357],[-74.43029,41.191016,354],[-74.430231,41.190878,353],[-74.430196,41.190739,351],[-74.430107,41.190617,350],[-74.429956,41.190528,349],[-74.429822,41.19042,348],[-74.429635,41.190376,347],[-74.429437,41.190415,347],[-74.42925,41.190431,347]]}}],"profile":[{"d":0,"e":1158.1},{"d":0.008,"e":1158.1},{"d":0.02,"e":1158.1},{"d":0.036,"e":1158.1},{"d":0.051,"e":1158.1},{"d":0.067,"e":1158.1},{"d":0.104,"e":1158.1},{"d":0.137,"e":1158.1},{"d":0.172,"e":1161.4},{"d":0.208,"e":1164.7},{"d":0.243,"e":1164.7},{"d":0.277,"e":1164.7},{"d":0.309,"e":1171.3},{"d":0.342,"e":1171.3},{"d":0.377,"e":1164.7},{"d":0.413,"e":1151.6},{"d":0.451,"e":1141.7},{"d":0.487,"e":1131.9},{"d":0.522,"e":1125.3},{"d":0.557,"e":1118.8},{"d":0.592,"e":1112.2},{"d":0.628,"e":1105.6},{"d":0.662,"e":1099.1},{"d":0.695,"e":1092.5},{"d":0.733,"e":1089.2},{"d":0.769,"e":1082.7},{"d":0.803,"e":1079.4},{"d":0.839,"e":1079.4},{"d":0.874,"e":1079.4},{"d":0.907,"e":1082.7},{"d":0.927,"e":1086},{"d":0.951,"e":1089.2},{"d":0.979,"e":1092.5},{"d":1.006,"e":1099.1},{"d":1.031,"e":1105.6},{"d":1.063,"e":1112.2},{"d":1.092,"e":1112.2},{"d":1.123,"e":1115.5},{"d":1.155,"e":1115.5},{"d":1.185,"e":1118.8},{"d":1.216,"e":1122},{"d":1.249,"e":1128.6},{"d":1.28,"e":1128.6},{"d":1.312,"e":1131.9},{"d":1.344,"e":1135.2},{"d":1.374,"e":1135.2},{"d":1.403,"e":1135.2},{"d":1.435,"e":1138.5},{"d":1.465,"e":1138.5},{"d":1.482,"e":1141.7},{"d":1.513,"e":1141.7},{"d":1.548,"e":1138.5},{"d":1.581,"e":1138.5},{"d":1.612,"e":1125.3},{"d":1.644,"e":1118.8},{"d":1.673,"e":1112.2},{"d":1.703,"e":1108.9},{"d":1.73,"e":1108.9},{"d":1.76,"e":1108.9},{"d":1.777,"e":1108.9},{"d":1.794,"e":1108.9},{"d":1.813,"e":1108.9},{"d":1.829,"e":1108.9},{"d":1.848,"e":1108.9},{"d":1.871,"e":1112.2},{"d":1.904,"e":1118.8},{"d":1.928,"e":1122},{"d":1.953,"e":1122},{"d":1.969,"e":1122},{"d":1.986,"e":1122},{"d":2.013,"e":1125.3},{"d":2.044,"e":1128.6},{"d":2.064,"e":1131.9},{"d":2.078,"e":1141.7},{"d":2.095,"e":1154.9},{"d":2.114,"e":1154.9},{"d":2.133,"e":1158.1},{"d":2.147,"e":1164.7},{"d":2.165,"e":1171.3},{"d":2.182,"e":1177.8},{"d":2.199,"e":1187.7},{"d":2.209,"e":1194.2},{"d":2.226,"e":1200.8},{"d":2.244,"e":1207.3},{"d":2.263,"e":1210.6},{"d":2.288,"e":1204.1},{"d":2.32,"e":1190.9},{"d":2.349,"e":1177.8},{"d":2.373,"e":1168},{"d":2.391,"e":1161.4},{"d":2.425,"e":1158.1},{"d":2.451,"e":1158.1},{"d":2.48,"e":1151.6},{"d":2.507,"e":1148.3},{"d":2.537,"e":1148.3},{"d":2.559,"e":1151.6},{"d":2.584,"e":1141.7},{"d":2.61,"e":1125.3},{"d":2.635,"e":1108.9},{"d":2.662,"e":1092.5},{"d":2.695,"e":1079.4},{"d":2.728,"e":1066.3},{"d":2.754,"e":1063},{"d":2.766,"e":1059.7},{"d":2.779,"e":1059.7},{"d":2.799,"e":1063},{"d":2.824,"e":1066.3},{"d":2.852,"e":1066.3},{"d":2.881,"e":1066.3},{"d":2.912,"e":1066.3},{"d":2.94,"e":1069.6},{"d":2.961,"e":1076.1},{"d":2.98,"e":1082.7},{"d":2.996,"e":1086},{"d":3.007,"e":1092.5},{"d":3.02,"e":1099.1},{"d":3.036,"e":1105.6},{"d":3.052,"e":1112.2},{"d":3.072,"e":1122},{"d":3.09,"e":1128.6},{"d":3.107,"e":1135.2},{"d":3.126,"e":1138.5},{"d":3.144,"e":1141.7},{"d":3.164,"e":1148.3},{"d":3.183,"e":1154.9},{"d":3.204,"e":1154.9},{"d":3.217,"e":1158.1},{"d":3.238,"e":1164.7},{"d":3.254,"e":1168},{"d":3.276,"e":1171.3},{"d":3.295,"e":1177.8},{"d":3.318,"e":1177.8},{"d":3.346,"e":1177.8},{"d":3.382,"e":1177.8},{"d":3.412,"e":1171.3},{"d":3.439,"e":1164.7},{"d":3.458,"e":1154.9},{"d":3.486,"e":1135.2},{"d":3.512,"e":1118.8},{"d":3.54,"e":1115.5},{"d":3.556,"e":1118.8},{"d":3.573,"e":1125.3},{"d":3.588,"e":1131.9},{"d":3.601,"e":1141.7},{"d":3.621,"e":1145},{"d":3.634,"e":1151.6},{"d":3.652,"e":1158.1},{"d":3.669,"e":1164.7},{"d":3.688,"e":1168},{"d":3.7,"e":1171.3},{"d":3.722,"e":1171.3},{"d":3.743,"e":1171.3},{"d":3.762,"e":1171.3},{"d":3.78,"e":1168},{"d":3.806,"e":1164.7},{"d":3.825,"e":1161.4},{"d":3.839,"e":1158.1},{"d":3.859,"e":1161.4},{"d":3.886,"e":1161.4},{"d":3.903,"e":1161.4},{"d":3.926,"e":1164.7},{"d":3.941,"e":1164.7},{"d":3.955,"e":1168},{"d":3.965,"e":1171.3},{"d":3.979,"e":1177.8},{"d":3.992,"e":1181.1},{"d":4.009,"e":1181.1},{"d":4.023,"e":1184.4},{"d":4.038,"e":1187.7},{"d":4.057,"e":1194.2},{"d":4.071,"e":1197.5},{"d":4.089,"e":1200.8},{"d":4.105,"e":1204.1},{"d":4.12,"e":1210.6},{"d":4.133,"e":1213.9},{"d":4.154,"e":1220.5},{"d":4.169,"e":1227},{"d":4.187,"e":1230.3},{"d":4.208,"e":1227},{"d":4.228,"e":1230.3},{"d":4.239,"e":1236.9},{"d":4.252,"e":1250},{"d":4.262,"e":1263.1},{"d":4.274,"e":1269.7},{"d":4.29,"e":1276.2},{"d":4.318,"e":1273},{"d":4.345,"e":1256.6},{"d":4.372,"e":1236.9},{"d":4.39,"e":1227},{"d":4.412,"e":1227},{"d":4.439,"e":1217.2},{"d":4.46,"e":1204.1},{"d":4.496,"e":1197.5},{"d":4.516,"e":1181.1},{"d":4.523,"e":1181.1},{"d":4.535,"e":1181.1},{"d":4.548,"e":1181.1},{"d":4.568,"e":1181.1},{"d":4.598,"e":1177.8},{"d":4.631,"e":1171.3},{"d":4.667,"e":1154.9},{"d":4.699,"e":1145},{"d":4.722,"e":1138.5},{"d":4.735,"e":1138.5}]};
LOOP.pink.profile = pinkData.profile;
LOOP.blue.profile = blueData.profile;
LOOP.checkered.profile = checkeredData.profile;

// ============================================================
// STATE
// ============================================================
let race = RACES[3]; // 50K default
let progress = 0;    // 0..1
let playing = false;
let speed = 1;       // multiplier
let finishHours = race.hours; // user-adjustable finish time
let lastTick = null;
let animFrame = null;

// Precompute race profile data
let raceProfile = [];  // [{d, e, loopId, loopIdx}]
let raceTotalDist = 0;
let raceLoopBoundaries = []; // distances where loops change

function buildRaceProfile() {
  raceProfile = [];
  raceLoopBoundaries = [0];
  let cumDist = 0;
  for (let i = 0; i < race.loops.length; i++) {
    const id = race.loops[i];
    const p = LOOP[id].profile;
    const maxD = p[p.length - 1].d;
    for (const pt of p) {
      raceProfile.push({ d: cumDist + pt.d, e: pt.e, loopId: id, loopIdx: i });
    }
    cumDist += maxD;
    raceLoopBoundaries.push(cumDist);
  }
  raceTotalDist = cumDist;
}

function getAtDist(dist) {
  // Binary search for nearest point
  let lo = 0, hi = raceProfile.length - 1;
  while (lo < hi) {
    const mid = (lo + hi) >> 1;
    if (raceProfile[mid].d < dist) lo = mid + 1;
    else hi = mid;
  }
  const pt = raceProfile[Math.min(lo, raceProfile.length - 1)];

  // Interpolate elevation
  if (lo > 0 && lo < raceProfile.length) {
    const prev = raceProfile[lo - 1];
    const next = raceProfile[lo];
    if (next.d !== prev.d) {
      const t = (dist - prev.d) / (next.d - prev.d);
      return { ...pt, e: prev.e + (next.e - prev.e) * t };
    }
  }
  return pt;
}

function getGradeAtDist(dist) {
  const window = 0.05; // miles
  const pt1 = getAtDist(Math.max(0, dist - window));
  const pt2 = getAtDist(Math.min(raceTotalDist, dist + window));
  const dDist = (pt2.d - pt1.d) * 5280; // feet
  const dEle = pt2.e - pt1.e;
  if (dDist === 0) return 0;
  return (dEle / dDist) * 100;
}

function getCumGainAtDist(dist) {
  let gain = 0;
  for (let i = 1; i < raceProfile.length; i++) {
    if (raceProfile[i].d > dist) break;
    const de = raceProfile[i].e - raceProfile[i - 1].e;
    if (de > 0) gain += de;
  }
  return gain;
}

// ============================================================
// TABS
// ============================================================
function buildTabs() {
  document.getElementById('tabs').innerHTML = RACES.map(r =>
    `<button class="tab ${r.id === race.id ? 'active' : ''}" onclick="pickRace('${r.id}')">${r.name} <span style="color:var(--text-dim);font-size:0.85em">${r.miles}mi</span></button>`
  ).join('');
}

// ============================================================
// PACE / FINISH TIME INPUT
// ============================================================
function buildPaceBar() {
  const h = Math.floor(finishHours);
  const m = Math.round((finishHours - h) * 60);
  document.getElementById('paceHrs').value = h;
  document.getElementById('paceMins').value = m;
  // Presets: race default, ±20%
  const presets = document.getElementById('pacePresets');
  const fast = race.hours * 0.8, def = race.hours, slow = race.hours * 1.2;
  const fmt = hrs => { const hh = Math.floor(hrs); const mm = Math.round((hrs - hh) * 60); return hh + ':' + String(mm).padStart(2, '0'); };
  presets.innerHTML =
    `<button class="pace-preset-btn" onclick="applyPreset(${fast})">Fast ${fmt(fast)}</button>` +
    `<button class="pace-preset-btn" onclick="applyPreset(${def})">Default ${fmt(def)}</button>` +
    `<button class="pace-preset-btn" onclick="applyPreset(${slow})">Slow ${fmt(slow)}</button>`;
  updatePaceResult();
}

function applyPreset(hrs) {
  finishHours = hrs;
  const h = Math.floor(hrs);
  const m = Math.round((hrs - h) * 60);
  document.getElementById('paceHrs').value = h;
  document.getElementById('paceMins').value = m;
  updatePaceResult();
  render();
}

function updateFinishTime() {
  const h = parseInt(document.getElementById('paceHrs').value) || 0;
  const m = parseInt(document.getElementById('paceMins').value) || 0;
  finishHours = h + m / 60;
  if (finishHours < 0.1) finishHours = 0.1; // prevent zero
  updatePaceResult();
  render();
}

function updatePaceResult() {
  const totalMins = finishHours * 60;
  const paceMin = totalMins / race.miles;
  const pm = Math.floor(paceMin);
  const ps = Math.round((paceMin - pm) * 60);
  document.getElementById('paceResult').innerHTML =
    `Avg pace: <strong>${pm}:${String(ps).padStart(2, '0')} /mi</strong>`;
}

function pickRace(id) {
  race = RACES.find(r => r.id === id);
  progress = 0;
  playing = false;
  finishHours = race.hours;
  document.getElementById('playBtn').innerHTML = '&#9654;';
  buildRaceProfile();
  buildTabs();
  buildPaceBar();
  buildScrubber();
  render();
}

// ============================================================
// SCRUBBER
// ============================================================
function buildScrubber() {
  // Colored segments
  const segs = document.getElementById('scrubSegments');
  let html = '';
  let cumDist = 0;
  for (const id of race.loops) {
    const pct = (LOOP[id].profile[LOOP[id].profile.length - 1].d / raceTotalDist) * 100;
    html += `<div class="scrub-seg" style="width:${pct}%;background:${LOOP[id].color};opacity:0.3"></div>`;
    cumDist += LOOP[id].profile[LOOP[id].profile.length - 1].d;
  }
  segs.innerHTML = html;

  // HQ marks
  const hqEl = document.getElementById('scrubHQ');
  let hqHtml = '';
  let cd = 0;
  for (let i = 0; i < race.loops.length - 1; i++) {
    cd += LOOP[race.loops[i]].profile[LOOP[race.loops[i]].profile.length - 1].d;
    const pct = (cd / raceTotalDist) * 100;
    hqHtml += `<div class="hq-tick" style="left:${pct}%"></div>`;
  }
  hqEl.innerHTML = hqHtml;
}

// Scrubber interaction
const scrubTrack = document.getElementById('scrubTrack');
let scrubbing = false;

function scrubTo(e) {
  const rect = scrubTrack.getBoundingClientRect();
  progress = Math.max(0, Math.min(1, (e.clientX - rect.left) / rect.width));
  render();
}
scrubTrack.addEventListener('mousedown', e => { scrubbing = true; playing = false; document.getElementById('playBtn').innerHTML = '&#9654;'; scrubTo(e); });
window.addEventListener('mousemove', e => { if (scrubbing) scrubTo(e); });
window.addEventListener('mouseup', () => { scrubbing = false; });
scrubTrack.addEventListener('touchstart', e => { scrubbing = true; playing = false; document.getElementById('playBtn').innerHTML = '&#9654;'; scrubTo(e.touches[0]); }, { passive: true });
window.addEventListener('touchmove', e => { if (scrubbing) scrubTo(e.touches[0]); }, { passive: true });
window.addEventListener('touchend', () => { scrubbing = false; });

// ============================================================
// PLAY / PAUSE
// ============================================================
function togglePlay() {
  playing = !playing;
  document.getElementById('playBtn').innerHTML = playing ? '&#9646;&#9646;' : '&#9654;';
  if (playing) {
    if (progress >= 0.999) progress = 0;
    lastTick = performance.now();
    tick();
  }
}

function setSpeed(s, btn) {
  speed = s;
  document.querySelectorAll('.speed-btn').forEach(b => b.classList.remove('active'));
  btn.classList.add('active');
}

function tick() {
  if (!playing) return;
  const now = performance.now();
  const dt = (now - lastTick) / 1000;
  lastTick = now;

  // Base speed: traverse entire race in ~30 seconds at 1x
  const baseRate = 1 / 30;
  progress = Math.min(1, progress + baseRate * speed * dt);

  render();

  if (progress >= 1) {
    playing = false;
    document.getElementById('playBtn').innerHTML = '&#9654;';
    return;
  }
  animFrame = requestAnimationFrame(tick);
}

// ============================================================
// RENDER
// ============================================================
function render() {
  const dist = progress * raceTotalDist;
  const pt = getAtDist(dist);
  const grade = getGradeAtDist(dist);
  const gain = getCumGainAtDist(dist);

  // Scrubber position
  document.getElementById('scrubFill').style.width = (progress * 100) + '%';
  document.getElementById('scrubHandle').style.left = (progress * 100) + '%';

  // Runner info
  document.getElementById('runnerEle').innerHTML = `${Math.round(pt.e).toLocaleString()}<span class="runner-elevation-unit">ft</span>`;
  const gradeDir = grade > 2 ? 'Climbing' : grade < -2 ? 'Descending' : 'Rolling';
  document.getElementById('runnerMeta').textContent = `Mile ${dist.toFixed(1)} \u00B7 ${gradeDir}`;

  // Loop pill
  const pill = document.getElementById('loopPill');
  const loopMeta = LOOP[pt.loopId];
  pill.textContent = loopMeta.label;
  pill.style.color = loopMeta.color;
  pill.style.borderColor = loopMeta.color;

  // Clock - race starts at 5:00 AM, pace-based time
  const elapsedHours = (dist / race.miles) * finishHours;
  const startHour = 5;
  const totalHours = startHour + elapsedHours;
  const hrs = Math.floor(totalHours) % 24;
  const mins = Math.floor((totalHours % 1) * 60);
  const ampm = hrs >= 12 ? 'PM' : 'AM';
  const displayHrs = hrs > 12 ? hrs - 12 : (hrs === 0 ? 12 : hrs);
  document.getElementById('clockTime').textContent = `${displayHrs}:${String(mins).padStart(2,'0')} ${ampm}`;

  // Data panel
  document.getElementById('dataDist').textContent = dist.toFixed(1) + ' mi';
  document.getElementById('dataEle').textContent = Math.round(pt.e).toLocaleString() + ' ft';
  document.getElementById('dataGain').textContent = Math.round(gain).toLocaleString() + ' ft';
  document.getElementById('dataGrade').textContent = (grade > 0 ? '+' : '') + grade.toFixed(1) + '%';
  document.getElementById('dataGrade').style.color = grade > 3 ? '#f87171' : grade < -3 ? '#4ade80' : 'var(--text-bright)';
  document.getElementById('dataLoop').textContent = `${pt.loopIdx + 1} of ${race.loops.length}`;

  // Progress ring
  renderProgressRing(progress);

  // Loop tracker
  renderLoopTracker(pt.loopIdx, dist);

  // Terrain canvas
  renderTerrain(dist, pt.e, pt.loopId);
}

function renderProgressRing(pct) {
  const r = 46;
  const circ = 2 * Math.PI * r;
  const offset = circ * (1 - pct);
  document.getElementById('progressRing').innerHTML = `
    <svg viewBox="0 0 120 120">
      <circle cx="60" cy="60" r="${r}" fill="none" stroke="var(--surface2)" stroke-width="6"/>
      <circle cx="60" cy="60" r="${r}" fill="none" stroke="var(--pink)" stroke-width="6"
        stroke-dasharray="${circ}" stroke-dashoffset="${offset}"
        stroke-linecap="round" transform="rotate(-90 60 60)"
        style="transition: stroke-dashoffset 0.1s"/>
      <text x="60" y="56" text-anchor="middle" class="progress-pct">${Math.round(pct * 100)}%</text>
      <text x="60" y="72" text-anchor="middle" class="progress-label-svg">complete</text>
    </svg>
  `;
}

function renderLoopTracker(currentIdx, dist) {
  let html = '';
  let cumDist = 0;
  for (let i = 0; i < race.loops.length; i++) {
    const id = race.loops[i];
    const meta = LOOP[id];
    const loopDist = meta.profile[meta.profile.length - 1].d;
    const isCurrent = i === currentIdx;
    const isDone = dist > cumDist + loopDist;

    let status = '';
    if (isDone) status = '<span class="loop-track-status done">&#10003;</span>';
    else if (isCurrent) {
      const loopPct = Math.round(((dist - cumDist) / loopDist) * 100);
      status = `<span class="loop-track-status active">${loopPct}%</span>`;
    }

    html += `<div class="loop-track-row ${isCurrent ? 'current' : ''}">
      <div class="loop-track-dot" style="background:${meta.color}"></div>
      <span class="loop-track-name" style="color:${isCurrent ? 'var(--text-bright)' : 'var(--text-dim)'}">${meta.abbr} #${i + 1}</span>
      ${status}
    </div>`;
    cumDist += loopDist;
  }
  document.getElementById('loopTracker').innerHTML = html;
}

// ============================================================
// TERRAIN RENDERING — the big visual
// ============================================================
function renderTerrain(currentDist, currentEle, currentLoopId) {
  const canvas = document.getElementById('terrainCanvas');
  const ctx = canvas.getContext('2d');
  const rect = canvas.getBoundingClientRect();
  const dpr = window.devicePixelRatio || 1;
  canvas.width = rect.width * dpr;
  canvas.height = rect.height * dpr;
  ctx.scale(dpr, dpr);
  const W = rect.width;
  const H = rect.height;

  // We show a "window" of the elevation profile centered on the runner
  const windowMiles = Math.min(raceTotalDist, Math.max(8, raceTotalDist * 0.35));
  const windowStart = Math.max(0, currentDist - windowMiles * 0.35);
  const windowEnd = Math.min(raceTotalDist, windowStart + windowMiles);
  const actualStart = windowEnd - windowMiles < 0 ? 0 : windowStart;
  const actualEnd = actualStart + windowMiles;

  // Get points in window
  const windowPts = raceProfile.filter(p => p.d >= actualStart && p.d <= actualEnd);
  if (windowPts.length < 2) return;

  const eles = windowPts.map(p => p.e);
  const eMin = Math.min(...eles) - 40;
  const eMax = Math.max(...eles) + 60;

  const ml = 0, mr = 0, mt = 50, mb = 0;
  const cw = W - ml - mr;
  const ch = H - mt - mb;

  const xScale = d => ml + ((d - actualStart) / windowMiles) * cw;
  const yScale = e => mt + ch - ((e - eMin) / (eMax - eMin)) * ch;

  ctx.clearRect(0, 0, W, H);

  // Sky gradient based on time of day
  const elapsedHours = (currentDist / race.miles) * finishHours;
  const tod = 5 + elapsedHours; // hours since midnight
  let skyTop, skyBottom;
  if (tod < 6) { skyTop = '#070810'; skyBottom = '#0d1020'; }       // pre-dawn
  else if (tod < 7) { skyTop = '#1a1030'; skyBottom = '#2a1840'; }  // dawn
  else if (tod < 8) { skyTop = '#1e2040'; skyBottom = '#3a2850'; }  // sunrise
  else if (tod < 17) { skyTop = '#0e1525'; skyBottom = '#1a2540'; } // day
  else if (tod < 19) { skyTop = '#1a1030'; skyBottom = '#2a1840'; } // sunset
  else if (tod < 20) { skyTop = '#120e20'; skyBottom = '#1a1030'; } // dusk
  else { skyTop = '#070810'; skyBottom = '#0d0e18'; }               // night

  const skyGrad = ctx.createLinearGradient(0, 0, 0, H);
  skyGrad.addColorStop(0, skyTop);
  skyGrad.addColorStop(1, skyBottom);
  ctx.fillStyle = skyGrad;
  ctx.fillRect(0, 0, W, H);

  // Stars at night
  if (tod < 6 || tod > 20) {
    ctx.fillStyle = 'rgba(255,255,255,0.4)';
    const seed = Math.floor(tod);
    for (let i = 0; i < 40; i++) {
      const sx = ((i * 7919 + seed * 104729) % 1000) / 1000 * W;
      const sy = ((i * 6271 + seed * 53591) % 1000) / 1000 * (H * 0.4);
      const sr = ((i * 3571) % 3) * 0.4 + 0.3;
      ctx.beginPath();
      ctx.arc(sx, sy, sr, 0, Math.PI * 2);
      ctx.fill();
    }
  }

  // Sun/Moon position
  if (tod >= 6 && tod <= 20) {
    const sunProgress = (tod - 6) / 14; // 0 at 6am, 1 at 8pm
    const sunX = sunProgress * W;
    const sunY = H * 0.15 - Math.sin(sunProgress * Math.PI) * H * 0.12;
    const sunR = 14;
    ctx.beginPath();
    ctx.arc(sunX, sunY, sunR, 0, Math.PI * 2);
    const sunGlow = ctx.createRadialGradient(sunX, sunY, 0, sunX, sunY, sunR * 4);
    sunGlow.addColorStop(0, 'rgba(255,200,50,0.3)');
    sunGlow.addColorStop(1, 'transparent');
    ctx.fillStyle = sunGlow;
    ctx.fill();
    ctx.beginPath();
    ctx.arc(sunX, sunY, sunR, 0, Math.PI * 2);
    ctx.fillStyle = 'rgba(255,220,80,0.8)';
    ctx.fill();
  }

  // Draw terrain segments
  // Group consecutive points by loopId for coloring
  let segStart = 0;
  while (segStart < windowPts.length) {
    const loopId = windowPts[segStart].loopId;
    let segEnd = segStart;
    while (segEnd < windowPts.length - 1 && windowPts[segEnd + 1].loopId === loopId) segEnd++;

    const pts = windowPts.slice(segStart, segEnd + 1);
    const color = LOOP[loopId].color;

    // Terrain fill
    ctx.beginPath();
    ctx.moveTo(xScale(pts[0].d), yScale(pts[0].e));
    for (const p of pts) ctx.lineTo(xScale(p.d), yScale(p.e));
    ctx.lineTo(xScale(pts[pts.length - 1].d), H);
    ctx.lineTo(xScale(pts[0].d), H);
    ctx.closePath();

    const hexToRgba = (hex, a) => {
      const r = parseInt(hex.slice(1,3),16), g = parseInt(hex.slice(3,5),16), b = parseInt(hex.slice(5,7),16);
      return `rgba(${r},${g},${b},${a})`;
    };
    const tGrad = ctx.createLinearGradient(0, mt, 0, H);
    tGrad.addColorStop(0, hexToRgba(color, 0.25));
    tGrad.addColorStop(0.6, hexToRgba(color, 0.08));
    tGrad.addColorStop(1, hexToRgba(color, 0.02));
    ctx.fillStyle = tGrad;
    ctx.fill();

    // Terrain line
    ctx.beginPath();
    ctx.moveTo(xScale(pts[0].d), yScale(pts[0].e));
    for (const p of pts) ctx.lineTo(xScale(p.d), yScale(p.e));
    ctx.strokeStyle = color;
    ctx.lineWidth = 2.5;
    ctx.stroke();

    // Subtle ridge highlight
    ctx.beginPath();
    ctx.moveTo(xScale(pts[0].d), yScale(pts[0].e));
    for (const p of pts) ctx.lineTo(xScale(p.d), yScale(p.e));
    ctx.strokeStyle = hexToRgba(color, 0.15);
    ctx.lineWidth = 8;
    ctx.stroke();

    segStart = segEnd + 1;
  }

  // "Already run" darkening - dim everything behind the runner
  if (currentDist > actualStart) {
    const runnerX = xScale(currentDist);
    ctx.fillStyle = 'rgba(7,8,15,0.35)';
    ctx.fillRect(0, 0, runnerX, H);
  }

  // Runner dot
  const rx = xScale(currentDist);
  const ry = yScale(currentEle);

  // Glow
  const glow = ctx.createRadialGradient(rx, ry, 0, rx, ry, 30);
  glow.addColorStop(0, 'rgba(255,255,255,0.15)');
  glow.addColorStop(1, 'transparent');
  ctx.fillStyle = glow;
  ctx.beginPath();
  ctx.arc(rx, ry, 30, 0, Math.PI * 2);
  ctx.fill();

  // Vertical line down from runner
  ctx.beginPath();
  ctx.moveTo(rx, ry + 8);
  ctx.lineTo(rx, H);
  ctx.strokeStyle = 'rgba(255,255,255,0.08)';
  ctx.lineWidth = 1;
  ctx.stroke();

  // Dot
  ctx.beginPath();
  ctx.arc(rx, ry, 6, 0, Math.PI * 2);
  ctx.fillStyle = '#fff';
  ctx.fill();
  ctx.strokeStyle = LOOP[currentLoopId].color;
  ctx.lineWidth = 2;
  ctx.stroke();

  // HQ markers (where loops meet)
  let cd = 0;
  for (let i = 0; i < race.loops.length - 1; i++) {
    cd += LOOP[race.loops[i]].profile[LOOP[race.loops[i]].profile.length - 1].d;
    if (cd >= actualStart && cd <= actualEnd) {
      const hx = xScale(cd);
      ctx.beginPath();
      ctx.setLineDash([3, 5]);
      ctx.moveTo(hx, mt);
      ctx.lineTo(hx, H);
      ctx.strokeStyle = 'rgba(255,215,0,0.2)';
      ctx.lineWidth = 1;
      ctx.stroke();
      ctx.setLineDash([]);

      // Small gold dot at terrain line
      const hqPt = getAtDist(cd);
      const hy = yScale(hqPt.e);
      ctx.beginPath();
      ctx.arc(hx, hy, 4, 0, Math.PI * 2);
      ctx.fillStyle = '#FFD700';
      ctx.fill();
    }
  }
}

// ============================================================
// INIT
// ============================================================
buildRaceProfile();
buildTabs();
buildPaceBar();
buildScrubber();
render();

window.addEventListener('resize', () => render());
</script>
</body>
</html>
